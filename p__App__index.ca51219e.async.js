"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[202],{92398:function(j,m,n){n.r(m),n.d(m,{default:function(){return k}});var A=n(19632),M=n.n(A),R=n(97857),u=n.n(R),P=n(58291),f=n(22148),I=n(75716),y=n(91811),T=n(24410),L=n(14957),B=n(43329),l=n(90948),Z=n(82280),K=n(38895),S=n(22797),U=n(59334),W=n(97212),F=n(90629),$=n(51233),E=n(69661),w=n(15861),z=n(78462),O=n(93946),J=n(98619),N=n(18987),D=n(97458),G=n(67294),i=n(85893),H=(0,l.ZP)(function(e){return(0,i.jsx)(Z.Z,u()({disableGutters:!0,elevation:0,square:!0},e))})(function(){return{}}),Y=(0,l.ZP)(function(e){return(0,i.jsx)(K.Z,u()({expandIcon:(0,i.jsx)(I.Z,{sx:{fontSize:"0.9rem"}})},e))})(function(e){var d=e.theme;return{padding:0,paddingRight:10,backgroundColor:d.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, 0)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:d.spacing(1)}}}),Q=(0,l.ZP)(S.Z)(function(e){var d=e.theme;return{padding:d.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}),V=(0,l.ZP)(U.Z)(function(){return{"& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),X=(0,l.ZP)(W.ZP)(function(){return{paddingLeft:8}});function k(){var e,d=(0,f.useModel)("app"),C=d.expanded,q=d.handleExpandedChange,aa=(0,f.useModel)("@@initialState"),a=aa.initialState,na=(a==null?void 0:a.apps)||[],oa=(0,f.useModel)("api"),b=oa.fetchSave,x=[],ia=(a==null?void 0:a.boxdata.sysapps)||[],p=[];a==null||a.boxdata.usercfgs.appsubs.forEach(function(r){if(a!=null&&a.boxdata.appSubCaches[r.url]){var o=a==null?void 0:a.boxdata.appSubCaches[r.url];p.push(o)}}),a==null||a.boxdata.usercfgs.favapps.forEach(function(r){var o=na.find(function(s){return s.id===r});o&&x.push(o)}),p=[].concat(M()(x.length?[{id:"favApp.id",name:"\u6536\u85CF\u5E94\u7528",description:"\u6536\u85CF\u5E94\u7528",author:"",icon:(0,i.jsx)(y.Z,{sx:{color:function(o){return o.palette.common.white}}}),repo:"",apps:x,task:[],updateTime:""}]:[]),M()(p),[{id:"sysApp.id",name:"\u7CFB\u7EDF\u5E94\u7528",description:"\u7CFB\u7EDF\u5E94\u7528",author:"",icon:(0,i.jsx)(T.Z,{sx:{color:function(o){return o.palette.common.white}}}),repo:"",apps:ia,task:[],updateTime:""}]);var h=a==null||(e=a.ui)===null||e===void 0?void 0:e.call(a,a==null?void 0:a.boxdata);return(0,i.jsx)(D.Z,{style:{marginTop:16},appear:!!(a!=null&&a.boxdata.usercfgs.isAnimate),children:p.map(function(r){return(0,i.jsx)(F.Z,{elevation:3,sx:{mb:2,overflow:"hidden",borderRadius:function(s){return s.spacing(2)}},children:(0,i.jsxs)(H,{expanded:C.indexOf(r.id)!==-1,onChange:q(r.id),sx:{borderRadius:function(s){return s.spacing(2)},overflow:"hidden"},children:[(0,i.jsx)(Y,{"aria-controls":r.id,id:r.id,children:(0,i.jsxs)($.Z,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:[typeof r.icon=="string"?(0,i.jsx)(E.Z,{id:r.id,src:r.icon,sx:{boxShadow:function(s){return s.shadows[1]}}}):(0,i.jsx)(E.Z,{id:r.id,sx:{boxShadow:function(s){return s.shadows[1]},bgcolor:function(s){return s.palette.primary.main}},children:r.icon}),(0,i.jsxs)(w.Z,{children:[r.name,"\uFF08",r.apps.length,"\uFF09"]})]})}),(0,i.jsx)(Q,{sx:{padding:0,maxHeight:300,overflowY:"auto"},children:(0,i.jsx)(D.Z,{type:["top","bottom"],leaveReverse:!0,children:(0,i.jsx)(z.Z,{sx:{padding:0,bgcolor:"background.paper"},children:r.apps.map(function(o,s){var ra=x.find(function(c){return c.id===o.id});return h==null||h.loadAppBaseInfo(o),C.indexOf(r.id)===-1?null:(0,i.jsx)(G.Fragment,{children:(0,i.jsx)(X,{secondaryAction:ra?(0,i.jsx)(O.Z,{edge:"end","aria-label":"cancelFav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var t,g=a==null?void 0:a.boxdata.usercfgs.favapps.find(function(v){return v===o.id});if(g){var _=a==null?void 0:a.boxdata.usercfgs;b.run({key:P.Z.userCfgs,val:JSON.stringify(u()(u()({},_),{},{favapps:_==null||(t=_.favapps)===null||t===void 0?void 0:t.filter(function(v){return v!==o.id})}))})}},children:(0,i.jsx)(L.Z,{color:"primary"})}):(0,i.jsx)(O.Z,{edge:"end","aria-label":"fav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var t,g=a==null?void 0:a.boxdata.usercfgs.favapps.find(function(v){return v===o.id});if(!g){var _=a==null?void 0:a.boxdata.usercfgs;_==null||(t=_.favapps)===null||t===void 0||t.push(o.id),b.run({key:P.Z.userCfgs,val:JSON.stringify(u()({},_))})}},children:(0,i.jsx)(B.Z,{})}),children:(0,i.jsxs)(J.Z,{sx:{padding:0,pr:"0 !important"},onClick:function(){f.history.push("/app/".concat(o.id))},children:[(0,i.jsx)(N.Z,{children:(0,i.jsx)(E.Z,{alt:o.name[0],src:o.icon,sx:{boxShadow:function(t){return t.shadows[1]}}})}),(0,i.jsx)(V,{primary:o.name,secondary:o.repo})]})},"".concat(o.id,"-").concat(s))},"".concat(o.id,"-").concat(s))})},"app_list")})})]})},r.id)})})}},58291:function(j,m){m.Z={logo:"https://raw.githubusercontent.com/Orz-3/mini/master/Color/box.png",userCfgs:"chavy_boxjs_userCfgs",sessions:"chavy_boxjs_sessions",app_subCaches:"chavy_boxjs_app_subCaches",backups:"chavy_boxjs_backups",cursessions:"chavy_boxjs_cur_sessions",gistCacheKey:"@chavy_boxjs_userCfgs.gist_cache_key",viewkeys:"@chavy_boxjs_userCfgs.viewkeys"}}}]);
