"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{16961:function(se,B,e){var k=e(52677),W=e.n(k),V=e(97857),p=e.n(V),z=e(19632),m=e.n(z),C=e(5574),y=e.n(C),x=e(13769),O=e.n(x),g=e(44842),L=e(22148),R=e(40625),$=e(42761),T=e(90089),I=e(93946),Y=e(42293),H=e(10155),J=e(78462),U=e(97212),Z=e(59334),S=e(15861),A=e(83321),_=e(50657),G=e(31425),s=e(50480),D=e(75438),F=e(36872),N=e(72890),Q=e(93109),E=e(67294),a=e(85893),K=["defaultValue"],X=(0,E.forwardRef)(function(i,w){var j=i.defaultValue,u=O()(i,K),q=E.useState(!1),r=y()(q,2),t=r[0],l=r[1],M=(0,E.useState)(j),v=y()(M,2),P=v[0],te=v[1],ie=(0,E.useState)(""),oe=y()(ie,2),ue=oe[0],re=oe[1],ee=(0,Q.Z)(ue,{wait:100}),de=(0,L.useModel)("@@initialState"),d=de.initialState,b=[{id:"extra_data_key",name:"\u975E\u8BA2\u9605\u6570\u636E",_id:"extra_data_key@local",keys:(d==null?void 0:d.boxdata.usercfgs.gist_cache_key)||[],descs_html:[],author:"local",repo:"",icons:[]}].concat(m()(((d==null?void 0:d.boxdata.sysapps)||[]).filter(function(n){return n.keys&&!!n.keys.length})));Object.values((d==null?void 0:d.boxdata.appSubCaches)||{}).forEach(function(n){b=[].concat(m()(b),m()(n.apps.filter(function(o){return o.keys&&!!o.keys.length})))}),b=b.filter(function(n){return n.name.indexOf(ee)>-1||!ee?!0:!!n.keys.find(function(o){return o.indexOf(ee)>-1})});var c=d==null?void 0:d.boxdata.datas;(0,E.useImperativeHandle)(w,function(){return{value:P}}),(0,E.useEffect)(function(){te(u.value)},[u.value]);var _e=function(){l(!1),re("")},le=function(o){var h;te(o),(h=u.onChange)===null||h===void 0||h.call(u,{target:{name:u.name,value:o}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,p()(p()({},u),{},{value:P,onChange:function(o){le(o.target.value)},size:"small",type:"text",endAdornment:(0,a.jsx)(I.Z,{size:"small","aria-label":u.name,onClick:function(){l(!0)},children:(0,a.jsx)(R.Z,{fontSize:"small",sx:{color:function(o){return o.palette.primary.main}}})})})),(0,a.jsxs)(_.Z,{open:t,onClose:function(){return _e()},sx:{mt:15,mb:15,"& .MuiDialog-paper":{width:"100%"}},children:[(0,a.jsx)(Y.Z,{position:"static",sx:{background:function(o){return o.palette.primary.main}},children:(0,a.jsx)(H.Z,{children:(0,a.jsxs)(g.ol,{children:[(0,a.jsx)(g.el,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0\u6216\u7F13\u5B58Key",inputProps:{"aria-label":"search"},onChange:function(o){re(o.target.value)}}),(0,a.jsx)(g.cB,{children:(0,a.jsx)($.Z,{})})]})})}),(0,a.jsx)(J.Z,{subheader:(0,a.jsx)("li",{}),sx:{position:"relative",overflow:"auto",minHeight:300,"& ul":{padding:0}},children:(0,a.jsx)(N.Z,{name:"radio-buttons-group",onChange:function(o,h){le(h)},children:b.length>0?b.map(function(n,o){var h,ae,ne="".concat(n.id,"_").concat(n.author,"_").concat(o);return(0,a.jsxs)("li",{style:{width:"100%",boxSizing:"border-box"},children:[(0,a.jsxs)(D.Z,{sx:{borderBottom:"1px solid rgba(0, 0, 0, .125)",mt:0},children:[n==null?void 0:n.name,"\uFF08",n==null||(h=n.keys)===null||h===void 0?void 0:h.length,"\uFF09"]}),n==null||(ae=n.keys)===null||ae===void 0?void 0:ae.map(function(f){return(0,a.jsx)(U.ZP,{sx:{p:0,pl:3,pr:3},children:(0,a.jsx)(Z.Z,{id:ne,primary:(0,a.jsx)(s.Z,{value:f,control:(0,a.jsx)(F.Z,{}),label:f,sx:{"& .MuiFormControlLabel-label":{width:"80%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"noWrap"}}}),primaryTypographyProps:{noWrap:!0,variant:"caption",sx:{fontWeight:"bold"}},secondary:(0,a.jsx)(S.Z,{noWrap:!0,color:"grey",variant:"caption",component:"div",children:(W()(c==null?void 0:c[f])==="object"&&(c!=null&&c[f])?JSON.stringify(c==null?void 0:c[f]):c==null?void 0:c[f])||"\u65E0\u6570\u636E"})})},"".concat(ne,"-").concat(f))})]},"section-".concat(ne))}):(0,a.jsx)(U.ZP,{sx:{height:290,textAlign:"center"},children:(0,a.jsx)(Z.Z,{primary:"\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C"})})})}),(0,a.jsxs)(G.Z,{sx:{borderTop:"1px solid rgba(0, 0, 0, .125)"},children:[(0,a.jsx)(A.Z,{color:"inherit",onClick:function(){return _e()},children:"\u53D6\u6D88"}),(0,a.jsx)(A.Z,{onClick:function(){return _e()},autoFocus:!0,children:"\u786E\u5B9A"})]})]})]})});B.Z=X},24020:function(se,B,e){e.r(B),e.d(B,{default:function(){return G}});var k=e(19632),W=e.n(k),V=e(97857),p=e.n(V),z=e(16961),m=e(58291),C=e(22148),y=e(23508),x=e(51233),O=e(15861),g=e(87918),L=e(90629),R=e(87357),$=e(56815),T=e(67720),I=e(83321),Y=e(50135),H=e(82280),J=e(22797),U=e(38895),Z=e(20640),S=e.n(Z),A=e(87536),_=e(85893);function G(){var s=(0,A.cI)(),D=(0,C.useModel)("alert"),F=(0,C.useModel)("app"),N=F.expanded,Q=F.handleExpandedChange,E=(0,C.useModel)("api"),a=E.fetchDataKey,K=E.fetchSave,X=(0,C.useModel)("@@initialState"),i=X.initialState,w=Object.keys((i==null?void 0:i.boxdata.datas)||{}),j=(i==null?void 0:i.boxdata.usercfgs.gist_cache_key)||[],u=(i==null?void 0:i.boxdata.usercfgs.viewkeys)||[],q=[{data:j,key:m.Z.gistCacheKey,title:"\u975E\u8BA2\u9605\u6570\u636E\uFF08".concat(j.length,"\uFF09")},{key:m.Z.viewkeys,title:"\u8FD1\u671F\u67E5\u770B\uFF08".concat(u.length,"\uFF09"),data:u}];return(0,_.jsxs)(x.Z,{spacing:3,m:1,children:[q.map(function(r,t){return r.data.length?(0,_.jsx)(x.Z,{direction:"column",mt:2,children:(0,_.jsxs)(H.Z,{onChange:Q(r.key),expanded:N.indexOf(r.key)!==-1,children:[(0,_.jsx)(U.Z,{sx:{m:0},expandIcon:(0,_.jsx)(y.Z,{}),"aria-controls":"panel".concat(t,"-content"),id:"panel".concat(t,"-header"),children:(0,_.jsx)(O.Z,{variant:"body2",children:r.title})}),(0,_.jsx)(J.Z,{children:(0,_.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:r.data.map(function(l,M){return(0,_.jsx)("div",{style:{padding:3},children:(0,_.jsx)(g.Z,{label:l,variant:"filled",sx:{maxWidth:160,"& span":{width:"100%"},boxShadow:function(P){return"0px 0 1px ".concat(P.palette.primary.main)}},onDelete:function(){K.run([{key:r.key,val:r.data.filter(function(P){return P!==l})}])},onClick:function(){s.setValue("key",l),a.run(l).then(function(P){s.setValue("data",P.val)})}})},"".concat(l,"_").concat(M))})})})]})},r.title):null}),(0,_.jsxs)(L.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(R.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(x.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(O.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,_.jsx)(O.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=s.getValues("key");if(!t)return D.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});S()(t),D.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(A.Qr,{name:"key",control:s.control,render:function(t){var l=t.field;return(0,_.jsx)(z.Z,p()(p()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},l),{},{onChange:function(v){s.setValue("data",""),l.onChange(v)}}))}}),(0,_.jsx)($.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,_.jsx)(T.Z,{}),(0,_.jsx)(x.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(I.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=s.getValues("key");if(!t)return D.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});u.includes(t)||K.run({key:m.Z.viewkeys,val:[t].concat(W()(u))}),a.run(t).then(function(l){s.setValue("data",l.val)})},children:"\u67E5\u8BE2"})})]}),(0,_.jsxs)(L.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(R.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(x.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(O.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,_.jsx)(O.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=s.getValues("key");if(!t)return D.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});S()(t),D.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(Y.Z,p()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},s.register("data")))]}),(0,_.jsx)(T.Z,{}),(0,_.jsx)(x.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(I.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=s.getValues("key"),l=s.getValues("data");if(!t)return D.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var M=[{key:t,val:l}];!w.includes(t)&&!j.includes(t)?M.push({key:m.Z.gistCacheKey,val:[t].concat(W()(j))}):j.includes(t)&&!l&&M.push({key:m.Z.gistCacheKey,val:j.filter(function(v){return v!==t})}),K.run(M)},children:"\u4FDD\u5B58"})})]})]})}}}]);
