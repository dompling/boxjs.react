"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[23],{82527:function(R,a,e){e.r(a),e.d(a,{monaco:function(){return k}});var L=e(15009),p=e.n(L),I=e(99289),W=e.n(I),K=e(5574),b=e.n(K),S=e(34747),y=e(18115),s=e(22148),$=e(37125),Z=e(58953),F=e(54970),z=e(3018),J=e(87357),N=e(90629),m=e(51233),H=e(15861),Y=e(98456),G=e(22169),Q=e(30381),V=e.n(Q),k=e(91739),w=e(97458),h=e(67294),X=e(2302),t=e(85893),q=["/** "," * \u6CE8\u610F: "," * \u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u4F7F\u7528\u5B8C\u6574\u7684 EnvJs \u73AF\u5883"," * "," * \u540C\u65F6: "," * \u4F60`\u5FC5\u987B`\u624B\u52A8\u8C03\u7528 $done()"," * "," * \u56E0\u4E3A: "," * BoxJs \u4E0D\u4E3A\u4E3B\u52A8\u6267\u884C\u7684\u811A\u672C\u8C03\u7528 $done()"," * \u800C\u628A $done \u7684\u65F6\u673A\u5B8C\u5168\u4EA4\u7531\u811A\u672C\u63A7\u5236"," * "," * \u6700\u540E: "," * \u8FD9\u6BB5\u811A\u672C\u662F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C\u7684!"," */ ",'const host = $.getdata("boxjs_host")','console.log("\u8F93\u51FA\u7684\u5185\u5BB9\u662F\u8FD4\u56DE\u7ED9\u6D4F\u89C8\u5668\u7684!")',"$.msg($.name, host)","$.done()","// $done() \u6216 $.done() \u90FD\u53EF\u4EE5"],ee=["/** "," * \u6CE8\u610F: "," * \u4F60\u6B63\u5728\u4F7F\u7528 Surge HTTP-API \u73AF\u5883"," * "," * \u5728\u8FD9\u91CC\uFF1A\u4F60\u4E0D\u53EF\u4EE5\u4F7F\u7528 EnvJs"," * \u8BF7\u786E\u4FDD\uFF1A\u4F60\u7684\u811A\u672C\u80FD\u88AB Surge \u72EC\u7ACB\u8FD0\u884C"," * "," * \u6700\u540E: "," * \u8FD9\u6BB5\u811A\u672C\u662F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C\u7684!"," */ ",'const host = $persistentStore.read("boxjs_host")','const msgs = [""]',"",'msgs.push("\u8FD9\u662F\u65E5\u5FD7\u7684\u5185\u5BB9")','msgs.push("BoxJs host: " + host)',"",'console.log(msgs.join("\\n"))',"$done()"],ne=function(){var f,P,M,g,D,O=(0,h.useRef)(null),oe=(0,s.useModel)("alert"),te=(0,s.useModel)("@@initialState"),n=te.initialState,_e=(0,s.useModel)("api"),j=_e.fetchRunScript,re=(0,s.useSearchParams)(),ae=b()(re,1),se=ae[0],l=se.get("url"),le=(n==null||(f=n.boxdata)===null||f===void 0?void 0:f.syscfgs.env)==="Surge"&&n!==null&&n!==void 0&&n.boxdata.usercfgs.httpapi?ee.join(`
`):q.join(`
`),ie=(0,h.useState)(l?"":le),T=b()(ie,2),u=T[0],v=T[1],U=(0,s.useRequest)(function(_){return(0,s.request)(_)},{manual:!0,formatResult:function(o){return o},onSuccess:function(o){v(o)}}),ue=(((P=document.getElementsByClassName(S.Z.footer_container))===null||P===void 0||(M=P[0])===null||M===void 0?void 0:M.getBoundingClientRect().height)||100)+30,de=(((g=document.getElementsByClassName(y.Z.header_container))===null||g===void 0||(D=g[0])===null||D===void 0?void 0:D.getBoundingClientRect().height)||160)+60,B=ue+de;return(0,h.useEffect)(function(){l&&U.run(l)},[]),(0,t.jsx)(w.Z,{interval:[100,0],appear:!!(n!=null&&n.boxdata.usercfgs.isAnimate),children:(0,t.jsxs)(J.Z,{pt:2,children:[(0,t.jsxs)(N.Z,{children:[(0,t.jsxs)(m.Z,{sx:{p:1},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(m.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsx)(H.Z,{variant:"h6",children:"\u811A\u672C\u7F16\u8F91\u5668"}),(0,t.jsxs)(m.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,t.jsx)(F.Z,{color:"primary",sx:{fontSize:24},onClick:function(){var o;(o=O.current)===null||o===void 0||o.click()}}),(0,t.jsx)(Z.Z,{color:"primary",sx:{fontSize:24},onClick:function(){var o=new Blob([u],{type:"text/plain;charset=utf-8;"}),i=V()().format("YYYY_MM_DD_HH_mm_ss"),d=(l==null?void 0:l.split("/"))||[],C=d[d.length-1]||"\u672A\u77E5\u540D\u79F0",E="".concat(C.replace(".js",""),"_").concat(i,".js"),c=URL.createObjectURL(o),r=document.createElement("a");r.href=c,r.setAttribute("download",E),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(r.href)}})]})]}),(0,t.jsx)(m.Z,{alignItems:"center",sx:{position:"relative"},onClick:function(){u&&(j.loading||j.run({script:u}))},children:j.loading?(0,t.jsx)(Y.Z,{size:24}):(0,t.jsx)(z.Z,{color:"primary",sx:{fontSize:24}})})]}),n!=null&&n.isMobile?(0,t.jsx)(G.ZP,{value:u,style:{fontSize:12},maxWidth:"100%",extensions:[(0,$.eJ)()],height:"calc(100vh - ".concat(B,"px)"),theme:(n==null?void 0:n.mode)==="dark"?"dark":"light",onChange:function(o){return v(o)}}):(0,t.jsx)(X.ZP,{width:"100%",value:U.loading?"//...Loading":u,height:"calc(100vh - ".concat(B-90,"px)"),theme:(n==null?void 0:n.mode)==="dark"?"vs-dark":"vs",onChange:function(o){v(o)},options:{fontSize:12,tabSize:2,contextmenu:!1,selectOnLineNumbers:!0,minimap:{enabled:!1}}})]}),(0,t.jsx)("input",{ref:O,type:"file",style:{display:"none"},onChange:function(){var o,i=(o=O.current)===null||o===void 0?void 0:o.files;if(!(i!=null&&i.length))return oe.alert({message:"\u8BF7\u9009\u62E9\u6587\u4EF6",type:"error"});var d=new FileReader;d.readAsText(i[0],"UTF-8"),d.onload=function(){var C=W()(p()().mark(function E(c){var r,A;return p()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:A=c==null||(r=c.target)===null||r===void 0?void 0:r.result;try{v(A)}catch(ce){console.log(ce)}case 2:case"end":return x.stop()}},E)}));return function(E){return C.apply(this,arguments)}}()}})]},"container")})};a.default=ne},34747:function(R,a){a.Z={footer_container:"footer_container___QFPpy",footer_container_tow:"footer_container_tow___BWiJC",footer_bar:"footer_bar___Lok0r"}},18115:function(R,a){a.Z={header_container:"header_container___SQGhg",app_bar:"app_bar___hIe1l"}}}]);
