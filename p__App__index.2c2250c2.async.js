"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[202],{92398:function(b,m,n){n.r(m),n.d(m,{default:function(){return k}});var j=n(19632),M=n.n(j),A=n(97857),u=n.n(A),P=n(58291),f=n(22148),I=n(75716),R=n(91811),T=n(24410),y=n(14957),L=n(43329),l=n(90948),B=n(82280),Z=n(38895),K=n(22797),S=n(59334),U=n(97212),W=n(90629),F=n(51233),p=n(69661),$=n(15861),w=n(78462),O=n(93946),z=n(98619),J=n(18987),N=n(97458),G=n(67294),i=n(85893),H=(0,l.ZP)(function(e){return(0,i.jsx)(B.Z,u()({disableGutters:!0,elevation:0,square:!0},e))})(function(){return{}}),Y=(0,l.ZP)(function(e){return(0,i.jsx)(Z.Z,u()({expandIcon:(0,i.jsx)(I.Z,{sx:{fontSize:"0.9rem"}})},e))})(function(e){var d=e.theme;return{padding:0,paddingRight:10,backgroundColor:d.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, 0)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:d.spacing(1)}}}),Q=(0,l.ZP)(K.Z)(function(e){var d=e.theme;return{padding:d.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}),V=(0,l.ZP)(S.Z)(function(){return{"& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),X=(0,l.ZP)(U.ZP)(function(){return{paddingLeft:8}});function k(){var e,d=(0,f.useModel)("app"),D=d.expanded,q=d.handleExpandedChange,aa=(0,f.useModel)("@@initialState"),a=aa.initialState,na=(a==null?void 0:a.apps)||[],oa=(0,f.useModel)("api"),C=oa.fetchSave,x=[],ia=(a==null?void 0:a.boxdata.sysapps)||[],E=[];a==null||a.boxdata.usercfgs.appsubs.forEach(function(r){if(a!=null&&a.boxdata.appSubCaches[r.url]){var o=a==null?void 0:a.boxdata.appSubCaches[r.url];E.push(o)}}),a==null||a.boxdata.usercfgs.favapps.forEach(function(r){var o=na.find(function(s){return s.id===r});o&&x.push(o)}),E=[].concat(M()(x.length?[{id:"favApp.id",name:"\u6536\u85CF\u5E94\u7528",description:"\u6536\u85CF\u5E94\u7528",author:"",icon:(0,i.jsx)(R.Z,{sx:{color:function(o){return o.palette.common.white}}}),repo:"",apps:x,task:[],updateTime:""}]:[]),M()(E),[{id:"sysApp.id",name:"\u7CFB\u7EDF\u5E94\u7528",description:"\u7CFB\u7EDF\u5E94\u7528",author:"",icon:(0,i.jsx)(T.Z,{sx:{color:function(o){return o.palette.common.white}}}),repo:"",apps:ia,task:[],updateTime:""}]);var h=a==null||(e=a.ui)===null||e===void 0?void 0:e.call(a,a==null?void 0:a.boxdata);return(0,i.jsx)(N.Z,{interval:0,style:{marginTop:16},appear:!!(a!=null&&a.boxdata.usercfgs.isAnimate),children:E.map(function(r){return(0,i.jsx)(W.Z,{elevation:3,sx:{mb:2,overflow:"hidden",borderRadius:function(s){return s.spacing(2)}},children:(0,i.jsxs)(H,{expanded:D.indexOf(r.id)!==-1,onChange:q(r.id),sx:{borderRadius:function(s){return s.spacing(2)},overflow:"hidden"},children:[(0,i.jsx)(Y,{"aria-controls":r.id,id:r.id,children:(0,i.jsxs)(F.Z,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:[typeof r.icon=="string"?(0,i.jsx)(p.Z,{id:r.id,src:r.icon,sx:{boxShadow:function(s){return s.shadows[1]}}}):(0,i.jsx)(p.Z,{id:r.id,sx:{boxShadow:function(s){return s.shadows[1]},bgcolor:function(s){return s.palette.primary.main}},children:r.icon}),(0,i.jsxs)($.Z,{children:[r.name,"\uFF08",r.apps.length,"\uFF09"]})]})}),(0,i.jsx)(Q,{sx:{padding:0,maxHeight:300,overflowY:"auto"},children:(0,i.jsx)(w.Z,{sx:{padding:0,bgcolor:"background.paper"},children:r.apps.map(function(o,s){var ra=x.find(function(c){return c.id===o.id});return h==null||h.loadAppBaseInfo(o),D.indexOf(r.id)===-1?null:(0,i.jsx)(G.Fragment,{children:(0,i.jsx)(X,{secondaryAction:ra?(0,i.jsx)(O.Z,{edge:"end","aria-label":"cancelFav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var _,g=a==null?void 0:a.boxdata.usercfgs.favapps.find(function(v){return v===o.id});if(g){var t=a==null?void 0:a.boxdata.usercfgs;C.run({key:P.Z.userCfgs,val:JSON.stringify(u()(u()({},t),{},{favapps:t==null||(_=t.favapps)===null||_===void 0?void 0:_.filter(function(v){return v!==o.id})}))})}},children:(0,i.jsx)(y.Z,{color:"primary"})}):(0,i.jsx)(O.Z,{edge:"end","aria-label":"fav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var _,g=a==null?void 0:a.boxdata.usercfgs.favapps.find(function(v){return v===o.id});if(!g){var t=a==null?void 0:a.boxdata.usercfgs;t==null||(_=t.favapps)===null||_===void 0||_.push(o.id),C.run({key:P.Z.userCfgs,val:JSON.stringify(u()({},t))})}},children:(0,i.jsx)(L.Z,{})}),children:(0,i.jsxs)(z.Z,{sx:{padding:0,pr:"0 !important"},onClick:function(){f.history.push("/app/".concat(o.id))},children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(p.Z,{alt:o.name[0],src:o.icon,sx:{boxShadow:function(_){return _.shadows[1]}}})}),(0,i.jsx)(V,{primary:o.name,secondary:o.repo})]})},"".concat(o.id,"-").concat(s))},"".concat(o.id,"-").concat(s))})},"app_list")})]})},r.id)})})}},58291:function(b,m){m.Z={logo:"https://raw.githubusercontent.com/Orz-3/mini/master/Color/box.png",userCfgs:"chavy_boxjs_userCfgs",sessions:"chavy_boxjs_sessions",app_subCaches:"chavy_boxjs_app_subCaches",backups:"chavy_boxjs_backups",cursessions:"chavy_boxjs_cur_sessions",gistCacheKey:"@chavy_boxjs_userCfgs.gist_cache_key",viewkeys:"@chavy_boxjs_userCfgs.viewkeys"}}}]);
