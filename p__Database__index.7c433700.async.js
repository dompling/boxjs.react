"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{16961:function(de,R,e){var $=e(52677),I=e.n($),Y=e(97857),p=e.n(Y),H=e(19632),u=e.n(H),J=e(5574),y=e.n(J),G=e(13769),j=e.n(G),x=e(33525),N=e(22148),Q=e(40625),m=e(42761),M=e(90089),b=e(93946),A=e(42293),X=e(10155),w=e(78462),K=e(97212),g=e(59334),q=e(15861),B=e(83321),ee=e(50657),_e=e(31425),ae=e(50480),ne=e(75438),te=e(36872),U=e(72890),oe=e(93109),E=e(67294),_=e(85893),re=["defaultValue"],s=(0,E.forwardRef)(function(v,le){var Z=v.defaultValue,d=j()(v,re),S=E.useState(!1),W=y()(S,2),se=W[0],F=W[1],k=(0,E.useState)(Z),T=y()(k,2),P=T[0],V=T[1],c=(0,E.useState)(""),z=y()(c,2),D=z[0],O=z[1],L=(0,oe.Z)(D,{wait:100}),o=(0,N.useModel)("@@initialState"),n=o.initialState,r=[{id:"extra_data_key",name:"\u975E\u8BA2\u9605\u6570\u636E",_id:"extra_data_key@local",keys:(n==null?void 0:n.boxdata.usercfgs.gist_cache_key)||[],descs_html:[],author:"local",repo:"",icons:[]}].concat(u()(((n==null?void 0:n.boxdata.sysapps)||[]).filter(function(a){return a.keys&&!!a.keys.length})));Object.values((n==null?void 0:n.boxdata.appSubCaches)||{}).forEach(function(a){r=[].concat(u()(r),u()(a.apps.filter(function(l){return l.keys&&!!l.keys.length})))}),r=r.filter(function(a){return a.name.indexOf(L)>-1||!L?!0:!!a.keys.find(function(l){return l.indexOf(L)>-1})});var t=n==null?void 0:n.boxdata.datas;(0,E.useImperativeHandle)(le,function(){return{value:P}}),(0,E.useEffect)(function(){V(d.value)},[d.value]);var i=function(){F(!1),O("")},f=function(l){var h;V(l),(h=d.onChange)===null||h===void 0||h.call(d,{target:{name:d.name,value:l}})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(M.Z,p()(p()({},d),{},{value:P,onChange:function(l){f(l.target.value)},size:"small",type:"text",endAdornment:(0,_.jsx)(b.Z,{size:"small","aria-label":d.name,onClick:function(){F(!0)},children:(0,_.jsx)(Q.Z,{fontSize:"small",sx:{color:function(l){return l.palette.primary.main}}})})})),(0,_.jsxs)(ee.Z,{open:se,onClose:function(){return i()},sx:{mt:15,mb:15,"& .MuiDialog-paper":{width:"100%"}},children:[(0,_.jsx)(A.Z,{position:"static",sx:{background:function(l){return l.palette.primary.main}},children:(0,_.jsx)(X.Z,{children:(0,_.jsxs)(x.ol,{children:[(0,_.jsx)(x.el,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0\u6216\u7F13\u5B58Key",inputProps:{"aria-label":"search"},onChange:function(l){O(l.target.value)}}),(0,_.jsx)(x.cB,{children:(0,_.jsx)(m.Z,{})})]})})}),(0,_.jsx)(w.Z,{subheader:(0,_.jsx)("li",{}),sx:{position:"relative",overflow:"auto",minHeight:300,"& ul":{padding:0}},children:(0,_.jsx)(U.Z,{name:"radio-buttons-group",onChange:function(l,h){f(h)},children:r.length>0?r.map(function(a,l){var h,ie,ue="".concat(a.id,"_").concat(a.author,"_").concat(l);return(0,_.jsxs)("li",{style:{width:"100%",boxSizing:"border-box"},children:[(0,_.jsxs)(ne.Z,{sx:{borderBottom:"1px solid rgba(0, 0, 0, .125)",mt:0},children:[a==null?void 0:a.name,"\uFF08",a==null||(h=a.keys)===null||h===void 0?void 0:h.length,"\uFF09"]}),a==null||(ie=a.keys)===null||ie===void 0?void 0:ie.map(function(C){return(0,_.jsx)(K.ZP,{sx:{p:0,pl:3,pr:3},children:(0,_.jsx)(g.Z,{id:ue,primary:(0,_.jsx)(ae.Z,{value:C,control:(0,_.jsx)(te.Z,{}),label:C,sx:{"& .MuiFormControlLabel-label":{width:"80%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"noWrap"}}}),primaryTypographyProps:{noWrap:!0,variant:"caption",sx:{fontWeight:"bold"}},secondary:(0,_.jsx)(q.Z,{noWrap:!0,color:"grey",variant:"caption",component:"div",children:(I()(t==null?void 0:t[C])==="object"&&(t!=null&&t[C])?JSON.stringify(t==null?void 0:t[C]):t==null?void 0:t[C])||"\u65E0\u6570\u636E"})})},"".concat(ue,"-").concat(C))})]},"section-".concat(ue))}):(0,_.jsx)(K.ZP,{sx:{height:290,textAlign:"center"},children:(0,_.jsx)(g.Z,{primary:"\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C"})})})}),(0,_.jsxs)(_e.Z,{sx:{borderTop:"1px solid rgba(0, 0, 0, .125)"},children:[(0,_.jsx)(B.Z,{color:"inherit",onClick:function(){return i()},children:"\u53D6\u6D88"}),(0,_.jsx)(B.Z,{onClick:function(){return i()},autoFocus:!0,children:"\u786E\u5B9A"})]})]})]})});R.Z=s},24020:function(de,R,e){e.r(R),e.d(R,{default:function(){return re}});var $=e(19632),I=e.n($),Y=e(9783),p=e.n(Y),H=e(97857),u=e.n(H),J=e(5574),y=e.n(J),G=e(16961),j=e(58291),x=e(22148),N=e(41733),Q=e(23508),m=e(51233),M=e(15861),b=e(87918),A=e(67720),X=e(2180),w=e(93946),K=e(90629),g=e(87357),q=e(56815),B=e(83321),ee=e(50135),_e=e(82280),ae=e(22797),ne=e(38895),te=e(20640),U=e.n(te),oe=e(67294),E=e(87536),_=e(85893);function re(){var s=(0,E.cI)(),v=(0,x.useModel)("alert"),le=(0,oe.useState)({}),Z=y()(le,2),d=Z[0],S=Z[1],W=(0,x.useModel)("app"),se=W.expanded,F=W.handleExpandedChange,k=(0,x.useModel)("api"),T=k.fetchDataKey,P=k.fetchSave,V=(0,x.useModel)("@@initialState"),c=V.initialState,z=Object.keys((c==null?void 0:c.boxdata.datas)||{}),D=(c==null?void 0:c.boxdata.usercfgs.gist_cache_key)||[],O=(c==null?void 0:c.boxdata.usercfgs.viewkeys)||[],L=[{data:D,key:j.Z.gistCacheKey,title:"\u975E\u8BA2\u9605\u6570\u636E\uFF08".concat(D.length,"\uFF09")},{key:j.Z.viewkeys,title:"\u8FD1\u671F\u67E5\u770B\uFF08".concat(O.length,"\uFF09"),data:O}];return(0,_.jsxs)(m.Z,{spacing:3,m:1,children:[L.map(function(o,n){if(!o.data.length)return null;var r=d[o.key];return(0,_.jsx)(m.Z,{direction:"column",mt:2,children:(0,_.jsxs)(_e.Z,{onChange:F(o.key),expanded:se.indexOf(o.key)!==-1,children:[(0,_.jsx)(ne.Z,{sx:{m:0},expandIcon:(0,_.jsx)(Q.Z,{}),"aria-controls":"panel".concat(n,"-content"),id:"panel".concat(n,"-header"),children:(0,_.jsx)(M.Z,{variant:"body2",children:o.title})}),(0,_.jsx)(ae.Z,{children:(0,_.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:o.data.map(function(t,i){return(0,_.jsx)("div",{style:{padding:3},children:(0,_.jsx)(b.Z,{label:t,variant:"filled",sx:{maxWidth:160,"& span":{width:"100%"},boxShadow:function(a){return"0px 0 1px ".concat(a.palette.primary.main)}},onDelete:function(){var a=[{key:o.key,val:o.data.filter(function(l){return l!==t})}];r==="all"&&a.push({key:o.key,val:null}),P.run(a)},onClick:function(){s.setValue("key",t),T.run(t).then(function(a){s.setValue("data",a.val)})}})},"".concat(t,"_").concat(i))})})}),(0,_.jsx)(A.Z,{}),(0,_.jsx)(X.Z,{children:(0,_.jsxs)(m.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%",p:1},children:[(0,_.jsx)(b.Z,{label:"\u5220\u9664\u952E\u548C\u503C",size:"small",onClick:function(){return S(u()(u()({},d),{},p()({},o.key,"all")))},color:r==="all"?"primary":void 0}),(0,_.jsx)(b.Z,{label:"\u4EC5\u5220\u9664\u952E",size:"small",onClick:function(){return S(u()(u()({},d),{},p()({},o.key,"delKey")))},color:r==="delKey"||!r?"primary":void 0}),(0,_.jsxs)(w.Z,{"aria-label":"delete",color:"primary",sx:{fontSize:16},onClick:function(){var i=[{key:o.key,val:[]}];r==="all"&&o.data.map(function(f){i.push({key:f,val:null})}),P.run(i)},children:[(0,_.jsx)(N.Z,{color:"primary",sx:{fontSize:16}}),"\u6E05\u7A7A"]})]})})]})},o.title)}),(0,_.jsxs)(K.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(g.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(M.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,_.jsx)(M.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var n=s.getValues("key");if(!n)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});U()(n),v.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(E.Qr,{name:"key",control:s.control,render:function(n){var r=n.field;return(0,_.jsx)(G.Z,u()(u()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},r),{},{onChange:function(i){s.setValue("data",""),r.onChange(i)}}))}}),(0,_.jsx)(q.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,_.jsx)(A.Z,{}),(0,_.jsx)(m.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(B.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var n=s.getValues("key");if(!n)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});O.includes(n)||P.run({key:j.Z.viewkeys,val:[n].concat(I()(O))}),T.run(n).then(function(r){s.setValue("data",r.val)})},children:"\u67E5\u8BE2"})})]}),(0,_.jsxs)(K.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(g.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(M.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,_.jsx)(M.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var n=s.getValues("key");if(!n)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});U()(n),v.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(ee.Z,u()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},s.register("data")))]}),(0,_.jsx)(A.Z,{}),(0,_.jsx)(m.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(B.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var n=s.getValues("key"),r=s.getValues("data");if(!n)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var t=[{key:n,val:r}];!z.includes(n)&&!D.includes(n)?t.push({key:j.Z.gistCacheKey,val:[n].concat(I()(D))}):D.includes(n)&&!r&&t.push({key:j.Z.gistCacheKey,val:D.filter(function(i){return i!==n})}),P.run(t)},children:"\u4FDD\u5B58"})})]})]})}}}]);
