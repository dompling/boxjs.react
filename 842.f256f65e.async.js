"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[842],{44842:function(J,p,o){o.d(p,{ol:function(){return no},cB:function(){return eo},el:function(){return to},ZP:function(){return bo}});var I=o(97857),c=o.n(I),M=o(5574),u=o.n(M),z=o(9783),D=o.n(z),E=o(31085),j=o(58291),x=o(22148),m=o(19572),b=o(42761),g=o(14957),Z=o(43329),B=o(75814),C=o(90948),T=o(97212),r=o(59334),K=o(41796),G=o(13970),N=o(87357),Q=o(90629),U=o(42293),s=o(10155),l=o(93946),L=o(69661),O=o(98456),S=o(15861),V=o(81458),A=o(78462),Y=o(98619),y=o(18987),X=o(35294),k=o(18972),mo=o(93109),go=o(97458),$=o(67294),oo={header_container:"header_container___SQGhg",app_bar:"app_bar___hIe1l"},n=o(85893),po=(0,C.ZP)(T.ZP)(function(){return{paddingLeft:8}}),jo=(0,C.ZP)(r.Z)(function(){return{"& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),no=(0,C.ZP)("div")(function(P){var a=P.theme;return{position:"relative",borderRadius:a.shape.borderRadius,backgroundColor:(0,K.Fq)(a.palette.common.white,.15),"&:hover":{backgroundColor:(0,K.Fq)(a.palette.common.white,.25)},marginLeft:0,width:"100%"}}),to=(0,C.ZP)(G.ZP)(function(P){var a=P.theme;return{color:"inherit",width:"100%","& .MuiInputBase-input":D()({padding:a.spacing(1,1,1,0),paddingRight:"calc(1em + ".concat(a.spacing(4),")"),paddingLeft:a.spacing(1),transition:a.transitions.create("width"),width:"100%"},a.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}),eo=(0,C.ZP)("div")(function(P){var a=P.theme;return{padding:a.spacing(0,2),height:"100%",right:0,top:0,position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),Co=function(){var a,w,io=(0,x.useModel)("@@initialState"),t=io.initialState,Zo=io.setInitialState,ao=(0,x.useModel)("api"),ro=ao.loading,so=ao.fetchSave,So=(0,x.useLocation)(),yo=(0,$.useState)(),lo=u()(yo,2),Po=lo[0],Io=lo[1],Mo=(0,$.useState)(!1),co=u()(Mo,2),Do=co[0],R=co[1],Eo=(0,$.useState)(null),uo=u()(Eo,2),vo=uo[0],ho=uo[1],Bo=(0,mo.Z)(Po,{wait:500}),To=Boolean(vo),Lo=function(d){ho(d.currentTarget),d.preventDefault()},fo=function(){ho(null)},i=t==null?void 0:t.boxdata,q=i==null||(a=i.syscfgs.envs)===null||a===void 0?void 0:a.find(function(e){return e.id===(i==null?void 0:i.syscfgs.env)}),v=t==null||(w=t.ui)===null||w===void 0?void 0:w.call(t,t==null?void 0:t.boxdata),xo=(v==null?void 0:v.iconThemeIdx)!==void 0?v==null?void 0:v.iconThemeIdx:1;return(0,n.jsxs)(go.Z,{appear:!!(t!=null&&t.boxdata.usercfgs.isAnimate),type:["top","bottom"],leaveReverse:!0,children:[i!=null&&i.usercfgs.isWaitToggleSearchBar?null:(0,n.jsx)(N.Z,{className:oo.header_container,children:(0,n.jsxs)(Q.Z,{sx:{borderRadius:7,overflow:"hidden"},elevation:3,children:[(0,n.jsx)(U.Z,{position:"static",children:(0,n.jsxs)(s.Z,{sx:{background:function(d){return d.palette.mode==="dark"?"":d.palette.common.white}},children:[["/","/app","/sub"].indexOf(So.pathname)===-1?(0,n.jsx)(l.Z,{color:"primary",onClick:function(){return x.history.back()},sx:{position:"relative",left:-10},children:(0,n.jsx)(m.Z,{sx:{width:28,height:28}})}):(0,n.jsx)(l.Z,{size:"large",edge:"start",sx:{mr:2},color:"primary",onClick:Lo,"aria-label":"open drawer",children:(0,n.jsxs)(N.Z,{sx:{position:"relative"},children:[(0,n.jsx)(L.Z,{alt:"BoxJs",src:(q==null?void 0:q.icons[xo])||j.Z.logo,sx:{width:28,height:28,border:1,borderColor:"white"}}),ro&&(0,n.jsx)(O.Z,{size:28,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-14px",marginLeft:"-14px"}})]})}),(0,n.jsx)(S.Z,{color:"primary",variant:"body1",component:"span",sx:{flexGrow:1},onClick:function(){R(!0)},children:i?"".concat(i==null?void 0:i.syscfgs.boxjs.id," - v").concat(i==null?void 0:i.syscfgs.version):"\u7F51\u7EDC\u8FDE\u63A5\u5931\u8D25"}),(0,n.jsx)(l.Z,{color:"primary",onClick:function(){R(!0)},children:(0,n.jsx)(B.Z,{})})]})}),ro&&(0,n.jsx)(V.Z,{})]},"appbar")}),(0,n.jsx)(E.Z,{fullScreen:!0,fullWidth:!0,open:Do,footer:null,onClose:function(){return R(!1)},title:(0,n.jsx)(U.Z,{position:"static",className:oo.app_bar,sx:{position:"fixed",top:0,zIndex:99},children:(0,n.jsxs)(s.Z,{sx:{pl:0},children:[(0,n.jsx)(l.Z,{color:"inherit",onClick:function(){return R(!1)},children:(0,n.jsx)(m.Z,{})}),(0,n.jsxs)(no,{children:[(0,n.jsx)(eo,{children:(0,n.jsx)(b.Z,{})}),(0,n.jsx)(to,{placeholder:"\u8BF7\u8F93\u5165",inputProps:{"aria-label":"search"},onChange:function(d){Io(d.target.value)}})]})]})}),children:(0,n.jsx)(A.Z,{sx:{padding:0,pt:5},children:t==null?void 0:t.apps.filter(function(e){return(e.name||e.id).indexOf("".concat(Bo||""))!==-1}).map(function(e,d){var H,Oo=t==null||(H=t.boxdata)===null||H===void 0?void 0:H.usercfgs.favapps.find(function(W){return W===e.id});return v==null||v.loadAppBaseInfo(e),(0,n.jsx)($.Fragment,{children:(0,n.jsx)(po,{secondaryAction:Oo?(0,n.jsx)(l.Z,{edge:"end","aria-label":"cancelFav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var h,_=t==null?void 0:t.boxdata.usercfgs.favapps.find(function(F){return F===e.id});if(_){var f=t==null?void 0:t.boxdata.usercfgs;so.run({key:j.Z.userCfgs,val:JSON.stringify(c()(c()({},f),{},{favapps:f==null||(h=f.favapps)===null||h===void 0?void 0:h.filter(function(F){return F!==e.id})}))})}},children:(0,n.jsx)(g.Z,{color:"primary"})}):(0,n.jsx)(l.Z,{edge:"end","aria-label":"fav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var h,_=t==null?void 0:t.boxdata.usercfgs.favapps.find(function(F){return F===e.id});if(!_){var f=t==null?void 0:t.boxdata.usercfgs;f==null||(h=f.favapps)===null||h===void 0||h.push(e.id),so.run({key:j.Z.userCfgs,val:JSON.stringify(c()({},f))})}},children:(0,n.jsx)(Z.Z,{})}),children:(0,n.jsxs)(Y.Z,{sx:{padding:0,pr:"0 !important"},onClick:function(){R(!1),x.history.push("/app/".concat(e.id))},children:[(0,n.jsx)(y.Z,{children:(0,n.jsx)(L.Z,{alt:e.name[0],src:e.icon,sx:{boxShadow:function(h){return h.shadows[1]}}})}),(0,n.jsx)(jo,{primary:e.name,secondary:e.repo})]})},"".concat(e.id,"-").concat(d))},"".concat(e.id,"-").concat(d))})})}),(0,n.jsx)(X.Z,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:vo,open:To,onClose:fo,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,left:24,width:10,height:10,transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:i==null?void 0:i.syscfgs.envs.map(function(e){return(0,n.jsxs)(k.Z,{onClick:function(H){t&&(t.boxdata.syscfgs.env=e.id,Zo(c()({},t)),fo())},children:[(0,n.jsx)(L.Z,{alt:e.id,src:e.icons[xo]}),e.id]},e.id)})})]})},bo=Co},92461:function(J,p,o){var I=o(97857),c=o.n(I),M=o(13769),u=o.n(M),z=o(67294),D=o(85893),E=["onSubmit","form"],j=function(m){var b=m.onSubmit,g=m.form,Z=u()(m,E);return(0,D.jsx)("form",c()(c()({onSubmit:(g==null?void 0:g.handleSubmit(b))||function(B){B.preventDefault(),b(void 0)}},Z),{},{children:Z.children}))};p.Z=j},31085:function(J,p,o){o.d(p,{Z:function(){return Q}});var I=o(13769),c=o.n(I),M=o(97857),u=o.n(M),z=o(92461),D=o(54776),E=o(50657),j=o(37645),x=o(87357),m=o(6514),b=o(31425),g=o(83321),Z=o(47036),B=o(98456),C=o(67294),T={fullScreen:"fullScreen___mbcSL",header_container:"header_container___wE0ve"},r=o(85893),K=["footer","loading","onClose","title","children","onSubmit","form"],G=C.forwardRef(function(s,l){return(0,r.jsx)(D.Z,u()({direction:"up",ref:l},s))}),N=function(s){var l=s.footer,L=s.loading,O=s.onClose,S=s.title,V=s.children,A=s.onSubmit,Y=s.form,y=c()(s,K);return(0,r.jsx)(E.Z,u()(u()({maxWidth:"xs",TransitionComponent:G,sx:{"& .MuiDialog-paper":{minWidth:"80%"}},className:y.fullScreen?T.fullScreen:""},y),{},{children:y.open&&(0,r.jsxs)(z.Z,{form:Y,onSubmit:function(k){A==null||A(k)},children:[S&&typeof S=="string"?(0,r.jsx)(j.Z,{className:T.header_container,sx:{fontSize:"1rem",padding:1.5},children:S},"title"):(0,r.jsx)(x.Z,{className:T.header_container,children:S}),(0,r.jsx)(m.Z,{dividers:!0,children:y.open?V:null},"content"),(0,r.jsx)(b.Z,{children:l!==void 0?l:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{sx:{color:Z.Z[600]},"aria-label":"delete",onClick:function(){O==null||O()},children:"\u53D6\u6D88"}),(0,r.jsx)(g.Z,{type:"submit",children:L?(0,r.jsx)(B.Z,{color:"inherit",size:20}):"\u786E\u5B9A"})]})},"action")]})}),"Dialog")},Q=N},58291:function(J,p){p.Z={logo:"https://raw.githubusercontent.com/Orz-3/mini/master/Color/box.png",userCfgs:"chavy_boxjs_userCfgs",sessions:"chavy_boxjs_sessions",app_subCaches:"chavy_boxjs_app_subCaches",backups:"chavy_boxjs_backups",cursessions:"chavy_boxjs_cur_sessions",gistCacheKey:"@chavy_boxjs_userCfgs.gist_cache_key",viewkeys:"@chavy_boxjs_userCfgs.viewkeys"}}}]);
