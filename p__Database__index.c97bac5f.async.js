"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4181],{24020:function(Y,x,n){n.r(x),n.d(x,{default:function(){return S}});var g=n(19632),A=n.n(g),B=n(97857),E=n.n(B),I=n(27476),m=n(88513),W=n(23508),o=n(51233),j=n(90629),M=n(87357),d=n(15861),Z=n(56815),P=n(67720),y=n(83321),b=n(87918),L=n(50135),R=n(82280),T=n(22797),U=n(38895),k=n(20640),O=n.n(k),F=n(67294),C=n(87536),e=n(85893),i="@chavy_boxjs_userCfgs.gist_cache_key";function S(){var h,v,a=(0,C.cI)(),u=(0,m.useModel)("alert"),p=(0,m.useModel)("api"),c=p.fetchDataKey,K=p.fetchSave,V=(0,m.useModel)("@@initialState"),f=V.initialState,z=Object.keys((f==null?void 0:f.boxdata.datas)||{}),l=((h=c.fetches[i])===null||h===void 0||(v=h.data)===null||v===void 0?void 0:v.val)||[];return(0,F.useEffect)(function(){c.run(i)},[]),(0,e.jsxs)(o.Z,{spacing:3,m:1,children:[(0,e.jsxs)(j.Z,{elevation:3,sx:{pt:2},children:[(0,e.jsxs)(M.Z,{pr:2,pl:2,pb:1,children:[(0,e.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,e.jsx)(d.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,e.jsx)(d.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=a.getValues("key");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});O()(t),u.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,e.jsx)(C.Qr,{name:"key",control:a.control,render:function(t){var _=t.field;return(0,e.jsx)(I.Z,E()(E()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},_),{},{onChange:function(D){a.setValue("data",""),_.onChange(D)}}))}}),(0,e.jsx)(Z.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(o.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,e.jsx)(y.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=a.getValues("key");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});c.run(t).then(function(_){a.setValue("data",_.val)})},children:"\u67E5\u8BE2"})})]}),l.length>0&&(0,e.jsx)(o.Z,{direction:"column",mt:2,children:(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(U.Z,{sx:{m:0},expandIcon:(0,e.jsx)(W.Z,{}),"aria-controls":"panel1-content",id:"panel1-header",children:(0,e.jsxs)(d.Z,{variant:"body2",children:["\u975E\u8BA2\u9605\u6570\u636E\uFF08",l.length,"\uFF09"]})}),(0,e.jsx)(T.Z,{children:(0,e.jsx)(o.Z,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:l.map(function(r,t){return(0,e.jsx)("div",{style:{padding:5},children:(0,e.jsx)(b.Z,{label:r,variant:"outlined",sx:{maxWidth:120,"& span":{width:"100%"}},onDelete:function(){K.run([{key:r,val:""},{key:i,val:l.filter(function(s){return s!==r})}]).then(function(){c.run(i)})},onClick:function(){a.setValue("key",r),c.run(r).then(function(s){a.setValue("data",s.val)})}})},"".concat(r,"_").concat(t))})})})]})}),(0,e.jsxs)(j.Z,{elevation:3,sx:{pt:2},children:[(0,e.jsxs)(M.Z,{pr:2,pl:2,pb:1,children:[(0,e.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,e.jsx)(d.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,e.jsx)(d.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=a.getValues("key");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});O()(t),u.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,e.jsx)(L.Z,E()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},a.register("data")))]}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(o.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,e.jsx)(y.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=a.getValues("key"),_=a.getValues("data");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var s=[{key:t,val:_}];!z.includes(t)&&!l.includes(t)?s.push({key:i,val:[].concat(A()(l),[t])}):l.includes(t)&&!_&&s.push({key:i,val:l.filter(function(D){return D!==t})}),K.run(s).then(function(){s.length>1&&c.run(i)})},children:"\u4FDD\u5B58"})})]})]})}}}]);
