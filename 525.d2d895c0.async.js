"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[525],{33525:function(K,d,o){o.d(d,{cB:function(){return io},el:function(){return eo},ol:function(){return no}});var O=o(97857),u=o.n(O),b=o(5574),c=o.n(b),U=o(9783),Z=o.n(U),I=o(31085),P=o(58291),f=o(22148),x=o(19572),p=o(42761),E=o(14957),M=o(43329),T=o(75814),j=o(90948),B=o(97212),r=o(59334),F=o(41796),G=o(13970),z=o(87357),H=o(90629),N=o(42293),s=o(10155),l=o(93946),S=o(69661),L=o(98456),g=o(15861),Q=o(81458),R=o(78462),V=o(98619),D=o(18987),Y=o(35294),X=o(18972),fo=o(93109),xo=o(97458),$=o(67294),oo=o(18115),n=o(85893),Eo=(0,j.ZP)(B.ZP)(function(){return{paddingLeft:8}}),Po=(0,j.ZP)(r.Z)(function(){return{"& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),no=(0,j.ZP)("div")(function(C){var a=C.theme;return{position:"relative",borderRadius:a.shape.borderRadius,backgroundColor:(0,F.Fq)(a.palette.common.white,.15),"&:hover":{backgroundColor:(0,F.Fq)(a.palette.common.white,.25)},marginLeft:0,width:"100%"}}),eo=(0,j.ZP)(G.ZP)(function(C){var a=C.theme;return{color:"inherit",width:"100%","& .MuiInputBase-input":Z()({padding:a.spacing(1,1,1,0),paddingRight:"calc(1em + ".concat(a.spacing(4),")"),paddingLeft:a.spacing(1),transition:a.transitions.create("width"),width:"100%"},a.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}),io=(0,j.ZP)("div")(function(C){var a=C.theme;return{padding:a.spacing(0,2),height:"100%",right:0,top:0,position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),jo=function(){var a,k,to=(0,f.useModel)("@@initialState"),e=to.initialState,po=to.setInitialState,ao=(0,f.useModel)("api"),ro=ao.loading,so=ao.fetchSave,Mo=(0,f.useLocation)(),go=(0,$.useState)(),lo=c()(go,2),Do=lo[0],Co=lo[1],Oo=(0,$.useState)(!1),_o=c()(Oo,2),bo=_o[0],A=_o[1],Zo=(0,$.useState)(null),uo=c()(Zo,2),co=uo[0],vo=uo[1],Io=(0,fo.Z)(Do,{wait:500}),To=Boolean(co),Bo=function(_){vo(_.currentTarget),_.preventDefault()},mo=function(){vo(null)},t=e==null?void 0:e.boxdata,w=t==null||(a=t.syscfgs.envs)===null||a===void 0?void 0:a.find(function(i){return i.id===(t==null?void 0:t.syscfgs.env)}),v=e==null||(k=e.ui)===null||k===void 0?void 0:k.call(e,e==null?void 0:e.boxdata),ho=(v==null?void 0:v.iconThemeIdx)!==void 0?v==null?void 0:v.iconThemeIdx:1;return(0,n.jsxs)(xo.Z,{appear:!!(e!=null&&e.boxdata.usercfgs.isAnimate),type:["top","bottom"],leaveReverse:!0,children:[t!=null&&t.usercfgs.isWaitToggleSearchBar?null:(0,n.jsx)(z.Z,{className:oo.Z.header_container,children:(0,n.jsxs)(H.Z,{sx:{borderRadius:7,overflow:"hidden"},elevation:3,children:[(0,n.jsx)(N.Z,{position:"static",children:(0,n.jsxs)(s.Z,{sx:{background:function(_){return _.palette.mode==="dark"?"":_.palette.common.white}},children:[["/","/app","/sub"].indexOf(Mo.pathname)===-1?(0,n.jsx)(l.Z,{color:"primary",onClick:function(){return f.history.back()},sx:{position:"relative",left:-10},children:(0,n.jsx)(x.Z,{sx:{width:28,height:28}})}):(0,n.jsx)(l.Z,{size:"large",edge:"start",sx:{mr:2},color:"primary",onClick:Bo,"aria-label":"open drawer",children:(0,n.jsxs)(z.Z,{sx:{position:"relative"},children:[(0,n.jsx)(S.Z,{alt:"BoxJs",src:(w==null?void 0:w.icons[ho])||P.Z.logo,sx:{width:28,height:28,border:1,borderColor:"white"}}),ro&&(0,n.jsx)(L.Z,{size:28,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-14px",marginLeft:"-14px"}})]})}),(0,n.jsx)(g.Z,{color:"primary",variant:"body1",component:"span",sx:{flexGrow:1},onClick:function(){A(!0)},children:t?"".concat(t==null?void 0:t.syscfgs.boxjs.id," - v").concat(t==null?void 0:t.syscfgs.version):"\u7F51\u7EDC\u8FDE\u63A5\u5931\u8D25"}),(0,n.jsx)(l.Z,{color:"primary",onClick:function(){A(!0)},children:(0,n.jsx)(T.Z,{})})]})}),ro&&(0,n.jsx)(Q.Z,{})]},"appbar")}),(0,n.jsx)(I.Z,{fullScreen:!0,fullWidth:!0,open:bo,footer:null,onClose:function(){return A(!1)},title:(0,n.jsx)(N.Z,{position:"static",className:oo.Z.app_bar,sx:{position:"fixed",top:0,zIndex:99},children:(0,n.jsxs)(s.Z,{sx:{pl:0},children:[(0,n.jsx)(l.Z,{color:"inherit",onClick:function(){return A(!1)},children:(0,n.jsx)(x.Z,{})}),(0,n.jsxs)(no,{children:[(0,n.jsx)(io,{children:(0,n.jsx)(p.Z,{})}),(0,n.jsx)(eo,{placeholder:"\u8BF7\u8F93\u5165",inputProps:{"aria-label":"search"},onChange:function(_){Co(_.target.value)}})]})]})}),children:(0,n.jsx)(R.Z,{sx:{padding:0,pt:5},children:e==null?void 0:e.apps.filter(function(i){return(i.name||i.id).indexOf("".concat(Io||""))!==-1}).map(function(i,_){var J,So=e==null||(J=e.boxdata)===null||J===void 0?void 0:J.usercfgs.favapps.find(function(W){return W===i.id});return v==null||v.loadAppBaseInfo(i),(0,n.jsx)($.Fragment,{children:(0,n.jsx)(Eo,{secondaryAction:So?(0,n.jsx)(l.Z,{edge:"end","aria-label":"cancelFav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var m,q=e==null?void 0:e.boxdata.usercfgs.favapps.find(function(y){return y===i.id});if(q){var h=e==null?void 0:e.boxdata.usercfgs;so.run({key:P.Z.userCfgs,val:JSON.stringify(u()(u()({},h),{},{favapps:h==null||(m=h.favapps)===null||m===void 0?void 0:m.filter(function(y){return y!==i.id})}))})}},children:(0,n.jsx)(E.Z,{color:"primary"})}):(0,n.jsx)(l.Z,{edge:"end","aria-label":"fav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var m,q=e==null?void 0:e.boxdata.usercfgs.favapps.find(function(y){return y===i.id});if(!q){var h=e==null?void 0:e.boxdata.usercfgs;h==null||(m=h.favapps)===null||m===void 0||m.push(i.id),so.run({key:P.Z.userCfgs,val:JSON.stringify(u()({},h))})}},children:(0,n.jsx)(M.Z,{})}),children:(0,n.jsxs)(V.Z,{sx:{padding:0,pr:"0 !important"},onClick:function(){A(!1),f.history.push("/app/".concat(i.id))},children:[(0,n.jsx)(D.Z,{children:(0,n.jsx)(S.Z,{alt:i.name[0],src:i.icon,sx:{boxShadow:function(m){return m.shadows[1]}}})}),(0,n.jsx)(Po,{primary:i.name,secondary:i.repo})]})},"".concat(i.id,"-").concat(_))},"".concat(i.id,"-").concat(_))})})}),(0,n.jsx)(Y.Z,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:co,open:To,onClose:mo,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,left:24,width:10,height:10,transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:t==null?void 0:t.syscfgs.envs.map(function(i){return(0,n.jsxs)(X.Z,{onClick:function(J){e&&(e.boxdata.syscfgs.env=i.id,po(u()({},e)),mo())},children:[(0,n.jsx)(S.Z,{alt:i.id,src:i.icons[ho]}),i.id]},i.id)})})]})};d.ZP=jo},92461:function(K,d,o){var O=o(97857),u=o.n(O),b=o(13769),c=o.n(b),U=o(67294),Z=o(85893),I=["onSubmit","form"],P=function(x){var p=x.onSubmit,E=x.form,M=c()(x,I);return(0,Z.jsx)("form",u()(u()({onSubmit:(E==null?void 0:E.handleSubmit(p))||function(T){T.preventDefault(),p(void 0)}},M),{},{children:M.children}))};d.Z=P},31085:function(K,d,o){o.d(d,{Z:function(){return H}});var O=o(13769),u=o.n(O),b=o(97857),c=o.n(b),U=o(92461),Z=o(54776),I=o(50657),P=o(37645),f=o(87357),x=o(6514),p=o(31425),E=o(83321),M=o(47036),T=o(98456),j=o(67294),B={fullScreen:"fullScreen___mbcSL",header_container:"header_container___wE0ve"},r=o(85893),F=["footer","loading","onClose","title","children","onSubmit","form"],G=j.forwardRef(function(s,l){return(0,r.jsx)(Z.Z,c()({direction:"up",ref:l},s))}),z=function(s){var l=s.footer,S=s.loading,L=s.onClose,g=s.title,Q=s.children,R=s.onSubmit,V=s.form,D=u()(s,F);return(0,r.jsx)(I.Z,c()(c()({maxWidth:"xs",TransitionComponent:G,sx:{"& .MuiDialog-paper":{minWidth:"80%"}},className:D.fullScreen?B.fullScreen:""},D),{},{children:D.open&&(0,r.jsxs)(U.Z,{form:V,onSubmit:function(X){R==null||R(X)},children:[g&&typeof g=="string"?(0,r.jsx)(P.Z,{className:B.header_container,sx:{fontSize:"1rem",padding:1.5},children:g},"title"):(0,r.jsx)(f.Z,{className:B.header_container,children:g}),(0,r.jsx)(x.Z,{dividers:!0,children:D.open?Q:null},"content"),(0,r.jsx)(p.Z,{children:l!==void 0?l:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.Z,{sx:{color:M.Z[600]},"aria-label":"delete",onClick:function(){L==null||L()},children:"\u53D6\u6D88"}),(0,r.jsx)(E.Z,{type:"submit",children:S?(0,r.jsx)(T.Z,{color:"inherit",size:20}):"\u786E\u5B9A"})]})},"action")]})}),"Dialog")},H=z},58291:function(K,d){d.Z={logo:"https://raw.githubusercontent.com/Orz-3/mini/master/Color/box.png",userCfgs:"chavy_boxjs_userCfgs",sessions:"chavy_boxjs_sessions",app_subCaches:"chavy_boxjs_app_subCaches",backups:"chavy_boxjs_backups",cursessions:"chavy_boxjs_cur_sessions",gistCacheKey:"@chavy_boxjs_userCfgs.gist_cache_key",viewkeys:"@chavy_boxjs_userCfgs.viewkeys"}},18115:function(K,d){d.Z={header_container:"header_container___SQGhg",app_bar:"app_bar___hIe1l"}}}]);
