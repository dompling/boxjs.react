(self.webpackChunk=self.webpackChunk||[]).push([[3875],{41687:function(z,n,o){"use strict";var f,r=o(64836);f={value:!0},n.Z=void 0;var h=r(o(64938)),l=o(85893),Z=(0,h.default)((0,l.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");n.Z=Z},58853:function(z,n,o){"use strict";var f,r=o(64836);f={value:!0},n.Z=void 0;var h=r(o(64938)),l=o(85893),Z=(0,h.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z"}),"CloudCircle");n.Z=Z},66385:function(z,n,o){"use strict";var f,r=o(64836);f={value:!0},n.Z=void 0;var h=r(o(64938)),l=o(85893),Z=(0,h.default)((0,l.jsx)("path",{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H9V4h9v12zM3 15v-2h2v2H3zm0-5.5h2v2H3v-2zM10 20h2v2h-2v-2zm-7-1.5v-2h2v2H3zM5 22c-1.1 0-2-.9-2-2h2v2zm3.5 0h-2v-2h2v2zm5 0v-2h2c0 1.1-.9 2-2 2zM5 6v2H3c0-1.1.9-2 2-2z"}),"CopyAll");n.Z=Z},46907:function(z,n,o){"use strict";var f,r=o(64836);f={value:!0},n.Z=void 0;var h=r(o(64938)),l=o(85893),Z=(0,h.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");n.Z=Z},25449:function(z,n,o){"use strict";var f,r=o(64836);f={value:!0},n.Z=void 0;var h=m(o(67294)),l=r(o(64938)),Z=o(85893);function p(a){if(typeof WeakMap!="function")return null;var M=new WeakMap,e=new WeakMap;return(p=function(c){return c?e:M})(a)}function m(a,M){if(!M&&a&&a.__esModule)return a;if(a===null||typeof a!="object"&&typeof a!="function")return{default:a};var e=p(M);if(e&&e.has(a))return e.get(a);var c={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in a)if(R!=="default"&&Object.prototype.hasOwnProperty.call(a,R)){var $=g?Object.getOwnPropertyDescriptor(a,R):null;$&&($.get||$.set)?Object.defineProperty(c,R,$):c[R]=a[R]}return c.default=a,e&&e.set(a,c),c}var P=(0,l.default)((0,Z.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");n.Z=P},1849:function(z,n,o){"use strict";var f,r=o(64836);f={value:!0},n.Z=void 0;var h=r(o(64938)),l=o(85893),Z=(0,h.default)((0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");n.Z=Z},11359:function(z,n,o){"use strict";var f,r=o(64836);f={value:!0},n.Z=void 0;var h=r(o(64938)),l=o(85893),Z=(0,h.default)((0,l.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");n.Z=Z},14948:function(z,n,o){"use strict";o.d(n,{Z:function(){return Po}});var f=o(63366),r=o(87462),h=o(67294),l=o(86010),p=d=>{const t=h.useRef({});return h.useEffect(()=>{t.current=d}),t.current},m=o(94780);function P(d){const{badgeContent:t,invisible:b=!1,max:G=99,showZero:W=!1}=d,J=p({badgeContent:t,max:G});let L=b;b===!1&&t===0&&!W&&(L=!0);const{badgeContent:E,max:y=G}=L?J:d,X=E&&Number(E)>y?`${y}+`:E;return{badgeContent:E,invisible:L,max:y,displayValue:X}}var a=o(24349),M=o(90948),e=o(71657),c=o(98216),g=o(1588),R=o(34867);function $(d){return(0,R.Z)("MuiBadge",d)}var O=(0,g.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Oo=o(85893);const Fo=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],fo=10,lo=4,Vo=d=>{const{color:t,anchorOrigin:b,invisible:G,overlap:W,variant:J,classes:L={}}=d,E={root:["root"],badge:["badge",J,G&&"invisible",`anchorOrigin${(0,c.Z)(b.vertical)}${(0,c.Z)(b.horizontal)}`,`anchorOrigin${(0,c.Z)(b.vertical)}${(0,c.Z)(b.horizontal)}${(0,c.Z)(W)}`,`overlap${(0,c.Z)(W)}`,t!=="default"&&`color${(0,c.Z)(t)}`]};return(0,m.Z)(E,$,L)},co=(0,M.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(d,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Do=(0,M.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(d,t)=>{const{ownerState:b}=d;return[t.badge,t[b.variant],t[`anchorOrigin${(0,c.Z)(b.anchorOrigin.vertical)}${(0,c.Z)(b.anchorOrigin.horizontal)}${(0,c.Z)(b.overlap)}`],b.color!=="default"&&t[`color${(0,c.Z)(b.color)}`],b.invisible&&t.invisible]}})(({theme:d,ownerState:t})=>(0,r.Z)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:d.typography.fontFamily,fontWeight:d.typography.fontWeightMedium,fontSize:d.typography.pxToRem(12),minWidth:fo*2,lineHeight:1,padding:"0 6px",height:fo*2,borderRadius:fo,zIndex:1,transition:d.transitions.create("transform",{easing:d.transitions.easing.easeInOut,duration:d.transitions.duration.enteringScreen})},t.color!=="default"&&{backgroundColor:(d.vars||d).palette[t.color].main,color:(d.vars||d).palette[t.color].contrastText},t.variant==="dot"&&{borderRadius:lo,height:lo*2,minWidth:lo*2,padding:0},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${O.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${O.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${O.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${O.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${O.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${O.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${O.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${O.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:d.transitions.create("transform",{easing:d.transitions.easing.easeInOut,duration:d.transitions.duration.leavingScreen})}));var Po=h.forwardRef(function(t,b){var G,W,J,L,E,y;const X=(0,e.Z)({props:t,name:"MuiBadge"}),{anchorOrigin:zo={vertical:"top",horizontal:"right"},className:Yo,component:ce,components:Jo={},componentsProps:Mo={},children:Xo,overlap:Bo="rectangular",color:Ko="default",invisible:Qo=!1,max:K=99,badgeContent:j,slots:Q,slotProps:to,showZero:ro=!1,variant:ho="standard"}=X,Io=(0,f.Z)(X,Fo),{badgeContent:mo,invisible:N,max:ko,displayValue:xo}=P({max:K,invisible:Qo,badgeContent:j,showZero:ro}),wo=p({anchorOrigin:zo,color:Ko,overlap:Bo,variant:ho,badgeContent:j}),To=N||mo==null&&ho!=="dot",{color:qo=Ko,overlap:_o=Bo,anchorOrigin:Ao=zo,variant:$o=ho}=To?wo:X,Eo=$o!=="dot"?xo:void 0,Co=(0,r.Z)({},X,{badgeContent:mo,invisible:To,max:ko,displayValue:Eo,showZero:ro,anchorOrigin:Ao,color:qo,overlap:_o,variant:$o}),bo=Vo(Co),uo=(G=(W=Q==null?void 0:Q.root)!=null?W:Jo.Root)!=null?G:co,Zo=(J=(L=Q==null?void 0:Q.badge)!=null?L:Jo.Badge)!=null?J:Do,yo=(E=to==null?void 0:to.root)!=null?E:Mo.root,jo=(y=to==null?void 0:to.badge)!=null?y:Mo.badge,oe=(0,a.Z)({elementType:uo,externalSlotProps:yo,externalForwardedProps:Io,additionalProps:{ref:b,as:ce},ownerState:Co,className:(0,l.Z)(yo==null?void 0:yo.className,bo.root,Yo)}),ee=(0,a.Z)({elementType:Zo,externalSlotProps:jo,ownerState:Co,className:(0,l.Z)(bo.badge,jo==null?void 0:jo.className)});return(0,Oo.jsxs)(uo,(0,r.Z)({},oe,{children:[Xo,(0,Oo.jsx)(Zo,(0,r.Z)({},ee,{children:Eo}))]}))})},61137:function(z,n,o){"use strict";o.r(n),o.d(n,{default:function(){return ee}});var f=o(97857),r=o.n(f),h=o(5574),l=o.n(h),Z=o(31085),p=o(88513),m=o(50135),P=o(56815),a=o(67294),M=o(87536),e=o(85893),c=function(s){var H=(0,p.useModel)("api"),S=H.fetchAddAppSub,I=(0,M.cI)(),U=(0,p.useSearchParams)(),F=l()(U,1),k=F[0];return(0,a.useEffect)(function(){var i=k.get("add");i&&I.setValue("url",i)},[]),(0,e.jsxs)(Z.Z,{title:"\u6DFB\u52A0\u8BA2\u9605",open:!!s.open,onClose:function(){s.onClose(),I.reset()},form:I,loading:S.loading,onSubmit:function(w){w.url&&S.run(w.url).then(s.onClose)},children:[(0,e.jsx)(m.Z,r()(r()({fullWidth:!0,multiline:!0,minRows:3,size:"small",variant:"standard",label:"\u8BA2\u9605\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u8BA2\u9605\u5730\u5740"},I.register("url")),{},{InputLabelProps:{shrink:!0}})),(0,e.jsx)(P.Z,{sx:{wordWrap:"break-word"},children:"https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.json"})]})},g=c,R=o(5554),$=o(58291),B=o(41687),O=o(58853),Oo=o(66385),Fo=o(46907),fo=o(25449),lo=o(1849),Vo=o(11359),co=o(90948),Do=o(14948),Go=o(13486),Po=o(60265),d=o(50657),t=o(37645),b=o(6514),G=o(63366),W=o(87462),J=o(86010),L=o(94780),E=o(71657),y=o(15861),X=o(1588),zo=o(34867);function Yo(x){return(0,zo.Z)("MuiDialogContentText",x)}const ce=(0,X.Z)("MuiDialogContentText",["root"]);var Jo=null;const Mo=["children","className"],Xo=x=>{const{classes:s}=x,H={root:["root"]},S=(0,L.Z)(H,Yo,s);return(0,W.Z)({},s,S)},Bo=(0,co.ZP)(y.Z,{shouldForwardProp:x=>(0,co.FO)(x)||x==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(x,s)=>s.root})({});var Qo=a.forwardRef(function(s,H){const S=(0,E.Z)({props:s,name:"MuiDialogContentText"}),{className:I}=S,U=(0,G.Z)(S,Mo),F=Xo(U);return(0,e.jsx)(Bo,(0,W.Z)({component:"p",variant:"body1",color:"text.secondary",ref:H,ownerState:U,className:(0,J.Z)(F.root,I)},S,{classes:F}))}),K=o(87357),j=o(51233),Q=o(69661),to=o(98456),ro=o(47036),ho=o(31425),Io=o(83321),mo=o(90629),N=o(93946),ko=o(20640),xo=o.n(ko),wo=o(7145),To=o.n(wo),qo=o(97458),_o=o(98958),Ao=o(98169),$o=o(63679),Eo=o(36963),Co=o(9628),bo={},uo=(0,co.ZP)(Do.Z)(function(x){var s=x.theme;return{"& .MuiBadge-badge":{bottom:"30%",boxShadow:"0 0 0 2px ".concat(s.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"& .MuiBadge-colorSuccess":{color:Go.Z[700],background:Go.Z[700]},"& .MuiBadge-colorError":{color:Po.Z[700],background:Po.Z[700]},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(1.4)",opacity:0}}}}),Zo=(0,co.ZP)(Do.Z)(function(){return{"& .MuiBadge-badge":{color:"#fff"}}}),yo=function(s){var H,S,I,U,F,k,i=s.appItem,w=s.index,Ho=s.findCard,C=s.moveCard,Wo=s.data,te=s.setCards,q=(0,a.useRef)(null),re=(0,p.useModel)("@@initialState"),T=re.initialState,Lo=(0,p.useModel)("api"),ao=Lo.fetchReloadAppSub,Y=Lo.fetchSave,_=(0,p.useModel)("alert"),No=(0,a.useState)(!1),vo=l()(No,2),ae=vo[0],no=vo[1],D=i.url,oo=Ho(D).index,ne=(0,_o.c)(function(){return{type:"grid",item:{id:D,originalIndex:oo},collect:function(v){return{isDragging:v.isDragging()}},end:function(v,A){var io=v.id,so=A.didDrop();v.originalIndex!==oo&&(so||C(io,v.originalIndex),Y.run([{key:$.Z.userCfgs,val:JSON.stringify(r()(r()({},T==null?void 0:T.boxdata.usercfgs),{},{appsubs:Wo}))}]))}}},[D,oo,C]),po=l()(ne,3),V=po[0].isDragging,ie=po[1],Ro=po[2],se=(0,Ao.L)(function(){return{accept:"grid",hover:function(v,A){var io;if(q.current){var so=v.index,So=w;if(so!==So){var le=(io=q.current)===null||io===void 0?void 0:io.getBoundingClientRect(),de=(le.bottom-le.top)/2,ve=A.getClientOffset(),ue=ve.y-le.top;so<So&&ue<de||so>So&&ue>de||(C(v.id,So),v.index=So)}}}}},[Ho,C]),Uo=l()(se,2),go=Uo[1],eo=V?0:1;return ie(go(q)),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(d.Z,{open:ae,onClose:function(){return no(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,e.jsx)(t.Z,{id:"alert-dialog-title",children:"\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u8BA2\u9605\u5417\uFF1F"}),(0,e.jsx)(b.Z,{children:(0,e.jsx)(Qo,{id:"alert-dialog-description",children:(0,e.jsx)(K.Z,{children:(0,e.jsxs)(j.Z,{direction:"row",spacing:2,children:[(0,e.jsxs)(uo,{variant:"dot",overlap:"circular",color:i.id?"success":"error",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{position:"relative"},children:[(0,e.jsx)(Q.Z,{src:i.icon,sx:{border:"1px solid #e8e8e8",width:36,height:36}}),(((H=ao.fetches[i.id])===null||H===void 0?void 0:H.loading)||((S=ao.fetches.all)===null||S===void 0?void 0:S.loading))&&(0,e.jsx)(to.Z,{size:40,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-23px",marginLeft:"-20px"}})]}),(0,e.jsxs)(j.Z,{sx:{overflow:"hidden",flex:"1 1"},children:[(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(y.Z,{variant:"body2",gutterBottom:!0,ref:q,children:i.name}),(0,e.jsx)(Zo,{color:"primary",badgeContent:i==null||(I=i.apps)===null||I===void 0?void 0:I.length,sx:{top:-15,right:13}})]}),(0,e.jsx)(y.Z,{noWrap:!0,variant:"body2",sx:{color:ro.Z[500],fontSize:12},children:i.repo})]})]})})})}),(0,e.jsxs)(ho.Z,{children:[(0,e.jsx)(Io.Z,{color:"inherit",onClick:function(){return no(!1)},children:"\u53D6\u6D88"}),(0,e.jsx)(Io.Z,{color:"error",onClick:function(){no(!1);var v=T==null?void 0:T.boxdata.usercfgs.appsubs;v==null||v.splice(w,1),te(v),T&&Y.run([{key:$.Z.userCfgs,val:JSON.stringify(r()(r()({},T==null?void 0:T.boxdata.usercfgs),{},{appsubs:v}))}])},autoFocus:!0,children:"\u786E\u5B9A"})]})]}),(0,e.jsx)(K.Z,{ref:Ro,sx:{marginBottom:2,boxSizing:"border-box",opacity:eo,transform:V?"translate(0,0)":"unset",zIndex:V?-1:"unset",position:"relative"},children:(0,e.jsxs)(mo.Z,{className:bo.dynamics,elevation:3,sx:{width:1,minHeight:20,borderRadius:4,padding:"20px 20px 12px 20px",boxSizing:"border-box"},children:[(0,e.jsx)(K.Z,{children:(0,e.jsxs)(j.Z,{direction:"row",spacing:2,children:[(0,e.jsxs)(uo,{variant:"dot",overlap:"circular",color:i.id?"success":"error",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{position:"relative"},children:[(0,e.jsx)(Q.Z,{src:i.icon,sx:{border:"1px solid #e8e8e8",width:36,height:36}}),(((U=ao.fetches[i.id])===null||U===void 0?void 0:U.loading)||((F=ao.fetches.all)===null||F===void 0?void 0:F.loading))&&(0,e.jsx)(to.Z,{size:40,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-23px",marginLeft:"-20px"}})]}),(0,e.jsxs)(j.Z,{sx:{overflow:"hidden",flex:"1 1"},children:[(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(y.Z,{variant:"body2",gutterBottom:!0,ref:q,children:i.name}),(0,e.jsx)(Zo,{color:"primary",badgeContent:i==null||(k=i.apps)===null||k===void 0?void 0:k.length,sx:{top:-15,right:13}})]}),(0,e.jsx)(y.Z,{noWrap:!0,variant:"body2",sx:{color:ro.Z[500],fontSize:12},children:i.repo})]})]})}),(0,e.jsx)(j.Z,{sx:{marginTop:1},children:(0,e.jsxs)(j.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,e.jsx)(N.Z,{color:"primary",component:"label",onClick:function(){xo()(i.url),_.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:(0,e.jsx)(Oo.Z,{})}),(0,e.jsx)(N.Z,{color:"primary",component:"label",onClick:function(){xo()(i.repo),_.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"}),window.open(i.repo)},children:(0,e.jsx)(fo.Z,{})}),(0,e.jsx)(N.Z,{color:"primary",component:"label",onClick:function(){xo()("".concat(window.location.href,"?add=").concat(encodeURIComponent(i.url))),_.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:(0,e.jsx)(Vo.Z,{})}),(0,e.jsx)(N.Z,{color:"success",component:"label",onClick:function(){ao.run(i)},children:(0,e.jsx)(lo.Z,{})}),(0,e.jsx)(N.Z,{color:"error",component:"label",onClick:function(){no(!0)},children:(0,e.jsx)(Fo.Z,{})}),(0,e.jsx)(y.Z,{noWrap:!0,gutterBottom:!0,variant:"overline",sx:{color:ro.Z[500],marginLeft:"auto !important"},children:(0,R.k6)(i.updateTime)})]})})]})})]})},jo=a.forwardRef(function(x,s){return(0,e.jsx)("div",{ref:s,children:(0,e.jsx)(yo,r()({},x))})});function oe(){var x,s,H=(0,p.useSearchParams)(),S=l()(H,2),I=S[0],U=S[1],F=(0,a.useState)(!!I.get("add")),k=l()(F,2),i=k[0],w=k[1],Ho=(0,p.useModel)("@@initialState"),C=Ho.initialState,Wo=(0,a.useRef)(),te=(0,Ao.L)(function(){return{accept:"grid",collect:function(v){return{dragItem:v.getItem()}}}}),q=l()(te,2),re=q[0],T=q[1],Lo=(0,p.useModel)("api"),ao=Lo.fetchReloadAppSub,Y=C==null?void 0:C.boxdata,_=(Y==null?void 0:Y.usercfgs.appsubs)||[],No=(Y==null?void 0:Y.appSubCaches)||{},vo=C==null?void 0:C.boxdata.usercfgs,ae=(0,a.useState)(_||[]),no=l()(ae,2),D=no[0],oo=no[1],ne=(0,a.useState)(),po=l()(ne,2),V=po[0],ie=po[1],Ro=(0,a.useCallback)(function(u){var v=D.filter(function(A){return"".concat(A==null?void 0:A.url)==="".concat(u)})[0];return{card:v,index:D==null?void 0:D.indexOf(v)}},[D]),se=(0,a.useCallback)(function(u,v){var A=Ro(u),io=A.card,so=A.index;oo(To()(D,{$splice:[[so,1],[v,0,io]]}))},[Ro,D,oo]);(0,a.useEffect)(function(){U({}),C!=null&&C.isMobile&&document.body.addEventListener("touchmove",function(u){ie({x:u.touches[0].clientX,y:u.touches[0].clientY})}),_.length!==D.length&&oo(_)},[_]);var Uo=(x=re.dragItem)===null||x===void 0?void 0:x.id,go=r()(r()({},No[Uo]),{},{url:Uo}),eo=(s=Wo.current)===null||s===void 0?void 0:s.getBoundingClientRect();return(0,e.jsxs)(K.Z,{component:"div",children:[(0,e.jsx)(g,{open:i,onClose:function(){return w(!1)}}),(0,e.jsxs)(j.Z,{direction:"row",justifyContent:"space-between",children:[(0,e.jsx)(y.Z,{variant:"h5",sx:(0,R.V$)(vo==null?void 0:vo.bgimg),children:"\u5E94\u7528\u8BA2\u9605"}),(0,e.jsxs)(j.Z,{direction:"row",spacing:2,children:[(0,e.jsx)(N.Z,{color:"primary",component:"label",onClick:function(){window.open("https://docs.boxjs.app/awesome/subscriptions")},children:(0,e.jsx)(O.Z,{})}),(0,e.jsx)(N.Z,{color:"primary",component:"label",onClick:function(){ao.run(void 0)},children:(0,e.jsx)(lo.Z,{})}),(0,e.jsx)(N.Z,{color:"primary",component:"label",onClick:function(){w(!0)},children:(0,e.jsx)(B.Z,{})})]})]}),(0,e.jsxs)(qo.Z,{ref:T,component:"div",appear:!!(C!=null&&C.boxdata.usercfgs.isAnimate),children:[D.map(function(u,v){var A=r()(r()({},u),No[u.url])||{name:"\u533F\u540D\u8BA2\u9605",repo:u.url,apps:[]};return(0,e.jsx)(jo,{data:D,index:v,appItem:A,findCard:Ro,moveCard:se,setCards:oo},u.url)}),(0,e.jsx)(K.Z,{ref:Wo,component:"div",sx:{display:go.id&&C!==null&&C!==void 0&&C.isMobile?"block":"none",zIndex:-1,opacity:.5,position:"fixed",left:((V==null?void 0:V.x)||0)-((eo==null?void 0:eo.width)||100)/2,top:((V==null?void 0:V.y)||0)-((eo==null?void 0:eo.height)||50)/2},children:(0,e.jsx)(mo.Z,{className:bo.dynamics,elevation:3,sx:{width:1,minHeight:20,borderRadius:4,padding:"20px 20px 12px 20px",boxSizing:"border-box"},children:(0,e.jsxs)(j.Z,{direction:"row",spacing:2,children:[(0,e.jsx)(uo,{variant:"dot",overlap:"circular",color:go.id?"success":"error",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{position:"relative"},children:(0,e.jsx)(Q.Z,{src:go.icon,sx:{border:"1px solid #e8e8e8",width:36,height:36}})}),(0,e.jsxs)(j.Z,{sx:{flex:"1 1"},children:[(0,e.jsx)(j.Z,{children:(0,e.jsx)(y.Z,{variant:"body2",gutterBottom:!0,sx:{flexGrow:1},children:go.name})}),(0,e.jsx)(y.Z,{noWrap:!0,variant:"body2",sx:{color:ro.Z[500],fontSize:12},children:"\u8BA2\u9605"})]})]})})})]})]})}function ee(){var x=(0,p.useModel)("@@initialState"),s=x.initialState;return(0,e.jsx)(K.Z,{pt:2,component:"div",children:(0,e.jsx)($o.W,{options:{delay:400},backend:s!=null&&s.isMobile?Co.zr:Eo.PD,children:(0,e.jsx)(oe,{})})})}},20640:function(z,n,o){"use strict";var f=o(11742),r={"text/plain":"Text","text/html":"Url",default:"Text"},h="Copy to clipboard: #{key}, Enter";function l(p){var m=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return p.replace(/#{\s*key\s*}/g,m)}function Z(p,m){var P,a,M,e,c,g,R=!1;m||(m={}),P=m.debug||!1;try{M=f(),e=document.createRange(),c=document.getSelection(),g=document.createElement("span"),g.textContent=p,g.ariaHidden="true",g.style.all="unset",g.style.position="fixed",g.style.top=0,g.style.clip="rect(0, 0, 0, 0)",g.style.whiteSpace="pre",g.style.webkitUserSelect="text",g.style.MozUserSelect="text",g.style.msUserSelect="text",g.style.userSelect="text",g.addEventListener("copy",function(B){if(B.stopPropagation(),m.format)if(B.preventDefault(),typeof B.clipboardData=="undefined"){P&&console.warn("unable to use e.clipboardData"),P&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var O=r[m.format]||r.default;window.clipboardData.setData(O,p)}else B.clipboardData.clearData(),B.clipboardData.setData(m.format,p);m.onCopy&&(B.preventDefault(),m.onCopy(B.clipboardData))}),document.body.appendChild(g),e.selectNodeContents(g),c.addRange(e);var $=document.execCommand("copy");if(!$)throw new Error("copy command was unsuccessful");R=!0}catch(B){P&&console.error("unable to copy using execCommand: ",B),P&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(m.format||"text",p),m.onCopy&&m.onCopy(window.clipboardData),R=!0}catch(O){P&&console.error("unable to copy using clipboardData: ",O),P&&console.error("falling back to prompt"),a=l("message"in m?m.message:h),window.prompt(a,p)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(e):c.removeAllRanges()),g&&document.body.removeChild(g),M()}return R}z.exports=Z},11742:function(z){z.exports=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var o=document.activeElement,f=[],r=0;r<n.rangeCount;r++)f.push(n.getRangeAt(r));switch(o.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":o.blur();break;default:o=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||f.forEach(function(h){n.addRange(h)}),o&&o.focus()}}}}]);
