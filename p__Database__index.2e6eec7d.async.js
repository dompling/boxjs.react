"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{16961:function(le,A,e){var F=e(52677),V=e.n(F),k=e(97857),P=e.n(k),z=e(19632),E=e.n(z),C=e(5574),p=e.n(C),d=e(13769),D=e.n(d),b=e(44842),K=e(22148),B=e(40625),$=e(42761),W=e(90089),L=e(93946),Y=e(42293),H=e(10155),J=e(78462),R=e(97212),T=e(59334),I=e(15861),y=e(83321),a=e(50657),G=e(31425),l=e(50480),v=e(75438),U=e(36872),Z=e(72890),S=e(93109),h=e(67294),_=e(85893),N=["defaultValue"],x=(0,h.forwardRef)(function(g,Q){var s=g.defaultValue,t=D()(g,N),r=h.useState(!1),c=p()(r,2),j=c[0],O=c[1],se=(0,h.useState)(s),_e=p()(se,2),ae=_e[0],ne=_e[1],ie=(0,h.useState)(""),te=p()(ie,2),ue=te[0],oe=te[1],X=(0,S.Z)(ue,{wait:100}),de=(0,K.useModel)("@@initialState"),i=de.initialState,f=[{id:"extra_data_key",name:"\u975E\u8BA2\u9605\u6570\u636E",_id:"extra_data_key@local",keys:(i==null?void 0:i.boxdata.usercfgs.gist_cache_key)||[],descs_html:[],author:"local",repo:"",icons:[]}].concat(E()(((i==null?void 0:i.boxdata.sysapps)||[]).filter(function(n){return n.keys&&!!n.keys.length})));Object.values((i==null?void 0:i.boxdata.appSubCaches)||{}).forEach(function(n){f=[].concat(E()(f),E()(n.apps.filter(function(o){return o.keys&&!!o.keys.length})))}),f=f.filter(function(n){return n.name.indexOf(X)>-1||!X?!0:!!n.keys.find(function(o){return o.indexOf(X)>-1})});var u=i==null?void 0:i.boxdata.datas;(0,h.useImperativeHandle)(Q,function(){return{value:ae}}),(0,h.useEffect)(function(){ne(t.value)},[t.value]);var w=function(){O(!1),oe("")},re=function(o){var m;ne(o),(m=t.onChange)===null||m===void 0||m.call(t,{target:{name:t.name,value:o}})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(W.Z,P()(P()({value:ae},t),{},{onChange:function(o){re(o.target.value)},size:"small",type:"text",endAdornment:(0,_.jsx)(L.Z,{size:"small","aria-label":t.name,onClick:function(){O(!0)},children:(0,_.jsx)(B.Z,{fontSize:"small",sx:{color:function(o){return o.palette.primary.main}}})})})),(0,_.jsxs)(a.Z,{open:j,onClose:function(){return w()},sx:{mt:15,mb:15,"& .MuiDialog-paper":{width:"100%"}},children:[(0,_.jsx)(Y.Z,{position:"static",sx:{background:function(o){return o.palette.primary.main}},children:(0,_.jsx)(H.Z,{children:(0,_.jsxs)(b.ol,{children:[(0,_.jsx)(b.el,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0\u6216\u7F13\u5B58Key",inputProps:{"aria-label":"search"},onChange:function(o){oe(o.target.value)}}),(0,_.jsx)(b.cB,{children:(0,_.jsx)($.Z,{})})]})})}),(0,_.jsx)(J.Z,{subheader:(0,_.jsx)("li",{}),sx:{position:"relative",overflow:"auto",minHeight:300,"& ul":{padding:0}},children:(0,_.jsx)(Z.Z,{name:"radio-buttons-group",onChange:function(o,m){re(m)},children:f.length>0?f.map(function(n,o){var m,q,ee="".concat(n.id,"_").concat(n.author,"_").concat(o);return(0,_.jsxs)("li",{style:{width:"100%",boxSizing:"border-box"},children:[(0,_.jsxs)(v.Z,{sx:{borderBottom:"1px solid rgba(0, 0, 0, .125)",mt:0},children:[n==null?void 0:n.name,"\uFF08",n==null||(m=n.keys)===null||m===void 0?void 0:m.length,"\uFF09"]}),n==null||(q=n.keys)===null||q===void 0?void 0:q.map(function(M){return(0,_.jsx)(R.ZP,{sx:{p:0,pl:3,pr:3},children:(0,_.jsx)(T.Z,{id:ee,primary:(0,_.jsx)(l.Z,{value:M,control:(0,_.jsx)(U.Z,{}),label:M,sx:{"& .MuiFormControlLabel-label":{width:"80%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"noWrap"}}}),primaryTypographyProps:{noWrap:!0,variant:"caption",sx:{fontWeight:"bold"}},secondary:(0,_.jsx)(I.Z,{noWrap:!0,color:"grey",variant:"caption",component:"div",children:(V()(u==null?void 0:u[M])==="object"&&(u!=null&&u[M])?JSON.stringify(u==null?void 0:u[M]):u==null?void 0:u[M])||"\u65E0\u6570\u636E"})})},"".concat(ee,"-").concat(M))})]},"section-".concat(ee))}):(0,_.jsx)(R.ZP,{sx:{height:290,textAlign:"center"},children:(0,_.jsx)(T.Z,{primary:"\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C"})})})}),(0,_.jsxs)(G.Z,{sx:{borderTop:"1px solid rgba(0, 0, 0, .125)"},children:[(0,_.jsx)(y.Z,{color:"inherit",onClick:function(){return w()},children:"\u53D6\u6D88"}),(0,_.jsx)(y.Z,{onClick:function(){return w()},autoFocus:!0,children:"\u786E\u5B9A"})]})]})]})});A.Z=x},24020:function(le,A,e){e.r(A),e.d(A,{default:function(){return G}});var F=e(19632),V=e.n(F),k=e(97857),P=e.n(k),z=e(16961),E=e(58291),C=e(22148),p=e(23508),d=e(51233),D=e(15861),b=e(87918),K=e(90629),B=e(87357),$=e(56815),W=e(67720),L=e(83321),Y=e(50135),H=e(82280),J=e(22797),R=e(38895),T=e(20640),I=e.n(T),y=e(87536),a=e(85893);function G(){var l=(0,y.cI)(),v=(0,C.useModel)("alert"),U=(0,C.useModel)("api"),Z=U.fetchDataKey,S=U.fetchSave,h=(0,C.useModel)("@@initialState"),_=h.initialState,N=Object.keys((_==null?void 0:_.boxdata.datas)||{}),x=(_==null?void 0:_.boxdata.usercfgs.gist_cache_key)||[],g=(_==null?void 0:_.boxdata.usercfgs.viewkeys)||[],Q=[{data:x,key:E.Z.gistCacheKey,title:"\u975E\u8BA2\u9605\u6570\u636E\uFF08".concat(x.length,"\uFF09")},{key:E.Z.viewkeys,title:"\u8FD1\u671F\u67E5\u770B\uFF08".concat(g.length,"\uFF09"),data:g}];return(0,a.jsxs)(d.Z,{spacing:3,m:1,children:[Q.map(function(s,t){return s.data.length?(0,a.jsx)(d.Z,{direction:"column",mt:2,children:(0,a.jsxs)(H.Z,{children:[(0,a.jsx)(R.Z,{sx:{m:0},expandIcon:(0,a.jsx)(p.Z,{}),"aria-controls":"panel".concat(t,"-content"),id:"panel".concat(t,"-header"),children:(0,a.jsx)(D.Z,{variant:"body2",children:s.title})}),(0,a.jsx)(J.Z,{children:(0,a.jsx)(d.Z,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:s.data.map(function(r,c){return(0,a.jsx)("div",{style:{padding:5},children:(0,a.jsx)(b.Z,{label:r,variant:"outlined",sx:{maxWidth:120,"& span":{width:"100%"}},onDelete:function(){S.run([{key:s.key,val:s.data.filter(function(O){return O!==r})}])},onClick:function(){l.setValue("key",r),Z.run(r).then(function(O){l.setValue("data",O.val)})}})},"".concat(r,"_").concat(c))})})})]})},s.title):null}),(0,a.jsxs)(K.Z,{elevation:3,sx:{pt:2},children:[(0,a.jsxs)(B.Z,{pr:2,pl:2,pb:1,children:[(0,a.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,a.jsx)(D.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,a.jsx)(D.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=l.getValues("key");if(!t)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});I()(t),v.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,a.jsx)(y.Qr,{name:"key",control:l.control,render:function(t){var r=t.field;return(0,a.jsx)(z.Z,P()(P()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},r),{},{onChange:function(j){l.setValue("data",""),r.onChange(j)}}))}}),(0,a.jsx)($.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,a.jsx)(W.Z,{}),(0,a.jsx)(d.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,a.jsx)(L.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=l.getValues("key");if(!t)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});Z.run(t).then(function(r){l.setValue("data",r.val)})},children:"\u67E5\u8BE2"})})]}),(0,a.jsxs)(K.Z,{elevation:3,sx:{pt:2},children:[(0,a.jsxs)(B.Z,{pr:2,pl:2,pb:1,children:[(0,a.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,a.jsx)(D.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,a.jsx)(D.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=l.getValues("key");if(!t)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});I()(t),v.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,a.jsx)(Y.Z,P()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},l.register("data")))]}),(0,a.jsx)(W.Z,{}),(0,a.jsx)(d.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,a.jsx)(L.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=l.getValues("key"),r=l.getValues("data");if(!t)return v.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var c=[{key:t,val:r}];!N.includes(t)&&!x.includes(t)?c.push({key:E.Z.gistCacheKey,val:[].concat(V()(x),[t])}):x.includes(t)&&!r&&c.push({key:E.Z.gistCacheKey,val:x.filter(function(j){return j!==t})}),S.run(c)},children:"\u4FDD\u5B58"})})]})]})}}}]);
