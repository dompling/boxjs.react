"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{16961:function(le,y,e){var I=e(52677),U=e.n(I),Z=e(97857),P=e.n(Z),S=e(19632),j=e.n(S),F=e(5574),u=e.n(F),g=e(13769),B=e.n(g),m=e(44842),V=e(22148),W=e(40625),L=e(42761),z=e(90089),$=e(93946),Y=e(42293),H=e(10155),J=e(78462),R=e(97212),p=e(59334),G=e(15861),b=e(83321),a=e(50657),E=e(31425),N=e(50480),A=e(75438),K=e(36872),r=e(72890),x=e(93109),v=e(67294),_=e(85893),T=["defaultValue"],Q=(0,v.forwardRef)(function(O,X){var c=O.defaultValue,o=B()(O,T),t=v.useState(!1),s=u()(t,2),d=s[0],f=s[1],se=(0,v.useState)(c),_e=u()(se,2),ae=_e[0],ne=_e[1],ie=(0,v.useState)(""),te=u()(ie,2),ue=te[0],oe=te[1],k=(0,x.Z)(ue,{wait:100}),de=(0,V.useModel)("@@initialState"),h=de.initialState,C=[];Object.values((h==null?void 0:h.boxdata.appSubCaches)||{}).forEach(function(n){C=[].concat(j()(C),j()(n.apps.filter(function(l){return!!l.keys})))}),C=[].concat(j()(C),j()((h==null?void 0:h.boxdata.sysapps)||[])).filter(function(n){return n.name.indexOf(k)>-1||!k?!0:!!n.keys.find(function(l){return l.indexOf(k)>-1})});var i=h==null?void 0:h.boxdata.datas;(0,v.useImperativeHandle)(X,function(){return{value:ae}}),(0,v.useEffect)(function(){ne(o.value)},[o.value]);var w=function(){f(!1),oe("")},re=function(l){var D;ne(l),(D=o.onChange)===null||D===void 0||D.call(o,{target:{name:o.name,value:l}})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(z.Z,P()(P()({value:ae},o),{},{onChange:function(l){re(l.target.value)},size:"small",type:"text",endAdornment:(0,_.jsx)($.Z,{size:"small","aria-label":o.name,onClick:function(){f(!0)},children:(0,_.jsx)(W.Z,{fontSize:"small"})})})),(0,_.jsxs)(a.Z,{open:d,onClose:function(){return w()},sx:{mt:15,mb:15,"& .MuiDialog-paper":{width:"100%"}},children:[(0,_.jsx)(Y.Z,{position:"static",children:(0,_.jsx)(H.Z,{children:(0,_.jsxs)(m.ol,{children:[(0,_.jsx)(m.el,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0\u6216\u7F13\u5B58Key",inputProps:{"aria-label":"search"},onChange:function(l){oe(l.target.value)}}),(0,_.jsx)(m.cB,{children:(0,_.jsx)(L.Z,{})})]})})}),(0,_.jsx)(J.Z,{subheader:(0,_.jsx)("li",{}),sx:{position:"relative",overflow:"auto",minHeight:300,"& ul":{padding:0}},children:(0,_.jsx)(r.Z,{name:"radio-buttons-group",onChange:function(l,D){re(D)},children:C.length>0?C.map(function(n,l){var D,q,ee="".concat(n.id,"_").concat(n.author,"_").concat(l);return(0,_.jsxs)("li",{style:{width:"100%",boxSizing:"border-box"},children:[(0,_.jsxs)(A.Z,{sx:{borderBottom:"1px solid rgba(0, 0, 0, .125)",mt:0},children:[n==null?void 0:n.name,"\uFF08",n==null||(D=n.keys)===null||D===void 0?void 0:D.length,"\uFF09"]}),n==null||(q=n.keys)===null||q===void 0?void 0:q.map(function(M){return(0,_.jsx)(R.ZP,{sx:{p:0,pl:3,pr:3},children:(0,_.jsx)(p.Z,{id:ee,primary:(0,_.jsx)(N.Z,{value:M,control:(0,_.jsx)(K.Z,{}),label:M,sx:{"& .MuiFormControlLabel-label":{width:"80%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"noWrap"}}}),primaryTypographyProps:{noWrap:!0,variant:"caption",sx:{fontWeight:"bold"}},secondary:(0,_.jsx)(G.Z,{noWrap:!0,color:"grey",variant:"caption",component:"div",children:(U()(i==null?void 0:i[M])==="object"&&(i!=null&&i[M])?JSON.stringify(i==null?void 0:i[M]):i==null?void 0:i[M])||"\u65E0\u6570\u636E"})})},"".concat(ee,"-").concat(M))})]},"section-".concat(ee))}):(0,_.jsx)(R.ZP,{sx:{height:290,textAlign:"center"},children:(0,_.jsx)(p.Z,{primary:"\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C"})})})}),(0,_.jsxs)(E.Z,{sx:{borderTop:"1px solid rgba(0, 0, 0, .125)"},children:[(0,_.jsx)(b.Z,{onClick:function(){return w()},children:"\u53D6\u6D88"}),(0,_.jsx)(b.Z,{onClick:function(){return w()},autoFocus:!0,children:"\u786E\u5B9A"})]})]})]})});y.Z=Q},24020:function(le,y,e){e.r(y),e.d(y,{default:function(){return N}});var I=e(19632),U=e.n(I),Z=e(97857),P=e.n(Z),S=e(16961),j=e(22148),F=e(23508),u=e(51233),g=e(90629),B=e(87357),m=e(15861),V=e(56815),W=e(67720),L=e(83321),z=e(87918),$=e(50135),Y=e(82280),H=e(22797),J=e(38895),R=e(20640),p=e.n(R),G=e(67294),b=e(87536),a=e(85893),E="@chavy_boxjs_userCfgs.gist_cache_key";function N(){var A,K,r=(0,b.cI)(),x=(0,j.useModel)("alert"),v=(0,j.useModel)("api"),_=v.fetchDataKey,T=v.fetchSave,Q=(0,j.useModel)("@@initialState"),O=Q.initialState,X=Object.keys((O==null?void 0:O.boxdata.datas)||{}),c=((A=_.fetches[E])===null||A===void 0||(K=A.data)===null||K===void 0?void 0:K.val)||[];return(0,G.useEffect)(function(){_.run(E)},[]),(0,a.jsxs)(u.Z,{spacing:3,m:1,children:[(0,a.jsxs)(g.Z,{elevation:3,sx:{pt:2},children:[(0,a.jsxs)(B.Z,{pr:2,pl:2,pb:1,children:[(0,a.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,a.jsx)(m.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,a.jsx)(m.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=r.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});p()(t),x.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,a.jsx)(b.Qr,{name:"key",control:r.control,render:function(t){var s=t.field;return(0,a.jsx)(S.Z,P()(P()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},s),{},{onChange:function(f){r.setValue("data",""),s.onChange(f)}}))}}),(0,a.jsx)(V.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,a.jsx)(W.Z,{}),(0,a.jsx)(u.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,a.jsx)(L.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=r.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});_.run(t).then(function(s){r.setValue("data",s.val)})},children:"\u67E5\u8BE2"})})]}),c.length>0&&(0,a.jsx)(u.Z,{direction:"column",mt:2,children:(0,a.jsxs)(Y.Z,{children:[(0,a.jsx)(J.Z,{sx:{m:0},expandIcon:(0,a.jsx)(F.Z,{}),"aria-controls":"panel1-content",id:"panel1-header",children:(0,a.jsxs)(m.Z,{variant:"body2",children:["\u975E\u8BA2\u9605\u6570\u636E\uFF08",c.length,"\uFF09"]})}),(0,a.jsx)(H.Z,{children:(0,a.jsx)(u.Z,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:c.map(function(o,t){return(0,a.jsx)("div",{style:{padding:5},children:(0,a.jsx)(z.Z,{label:o,variant:"outlined",sx:{maxWidth:120,"& span":{width:"100%"}},onDelete:function(){T.run([{key:o,val:""},{key:E,val:c.filter(function(d){return d!==o})}]).then(function(){_.run(E)})},onClick:function(){r.setValue("key",o),_.run(o).then(function(d){r.setValue("data",d.val)})}})},"".concat(o,"_").concat(t))})})})]})}),(0,a.jsxs)(g.Z,{elevation:3,sx:{pt:2},children:[(0,a.jsxs)(B.Z,{pr:2,pl:2,pb:1,children:[(0,a.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,a.jsx)(m.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,a.jsx)(m.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=r.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});p()(t),x.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,a.jsx)($.Z,P()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},r.register("data")))]}),(0,a.jsx)(W.Z,{}),(0,a.jsx)(u.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,a.jsx)(L.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=r.getValues("key"),s=r.getValues("data");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var d=[{key:t,val:s}];!X.includes(t)&&!c.includes(t)?d.push({key:E,val:[].concat(U()(c),[t])}):c.includes(t)&&!s&&d.push({key:E,val:c.filter(function(f){return f!==t})}),T.run(d).then(function(){d.length>1&&_.run(E)})},children:"\u4FDD\u5B58"})})]})]})}}}]);
