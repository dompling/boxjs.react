"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[785,371],{86587:function(to,E,o){o.r(E),o.d(E,{Item:function(){return no},default:function(){return vo}});var F=o(5574),C=o.n(F),w=o(13769),G=o.n(w),T=o(97857),b=o.n(T),N=o(58291),h=o(22148),$=o(90948),J=o(90629),Q=o(98396),s=o(51233),A=o(87357),z=o(69661),ao=o(81458),V=o(15861),X=o(7145),i=o.n(X),W=o(97458),O=o(67294),H=o(98958),_=o(98169),R=o(63679),l=o(36963),B=o(9628),e=o(85893),ro=["item","script","moveCard","findCard","data"],no=(0,$.ZP)(J.Z)(function(x){var r=x.theme;return b()(b()({},r.typography.body2),{},{textAlign:"center",color:r.palette.text.secondary,overflow:"hidden",background:"unset",boxShadow:"unset",borderRadius:0})}),j={},Y={},so=function(r){var u,t=r.item,K=r.script,P=r.moveCard,L=r.findCard,U=r.data,k=G()(r,ro),c=(0,Q.Z)("(min-width:960px)"),m="".concat(t==null?void 0:t.id,"_").concat(t==null?void 0:t.author),Z=(0,h.useModel)("@@initialState"),v=Z.initialState,I=(0,h.useModel)("api"),a=I.fetchRunScript,f=I.fetchSave,d=L(m).index,D=(0,H.c)(function(){return{type:"grid",item:{id:m,originalIndex:d},collect:function(n){var g=n.getSourceClientOffset(),M={x:0,y:0};return g&&(M.x=g.x,M.y=g.y),{offset:M,isDragging:n.isDragging()}},end:function(n,g){var M=n.id,q=n.originalIndex,mo=g.didDrop();mo||P(M,q);var po=U==null?void 0:U.map(function(oo){return oo==null?void 0:oo.id}),go=v==null?void 0:v.boxdata.usercfgs;f.run({key:N.Z.userCfgs,val:JSON.stringify(b()(b()({},go),{},{favapps:po}))})}}},[m,d,P]),p=C()(D,2),io=p[0],eo=io.isDragging,y=io.offset,co=p[1],_o=(0,_.L)(function(){return{accept:"grid",hover:function(n){var g=n.id;if(g!==m){var M=L(m),q=M.index;P(g,q)}}}},[L,P]),fo=C()(_o,2),ho=fo[1],xo=eo?0:1;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(no,{sx:{flex:c?"0 0 ".concat(100/6,"%"):"0 0 25%",opacity:xo,transform:"translate(0,0)",pt:1,pb:1},ref:function(n){return co(ho(n))},onClick:function(){var n="".concat(t==null?void 0:t.id);j[n]===void 0&&(j[n]=0),j[n]+=1,Y[n]=setTimeout(function(){if(Y[n]!==void 0&&clearTimeout(Y[n]),j[n]===2){if(j[n]=0,!K)return h.history.push("/app/".concat(n));a.run({url:K,isRemote:!0})}else j[n]===1&&h.history.push("/app/".concat(n));j={}},200)},children:(0,e.jsxs)(s.Z,{spacing:1,justifyContent:"center",alignItems:"center",children:[(0,e.jsxs)(A.Z,{sx:{width:56,height:56,borderRadius:3,overflow:"hidden",position:"relative",boxShadow:function(n){return n.shadows[5]}},children:[(0,e.jsx)(z.Z,{variant:"square",alt:t==null?void 0:t.name,src:t==null?void 0:t.icon,sx:{width:"100%",height:"100%"}}),((u=a.fetches["".concat(K)])===null||u===void 0?void 0:u.loading)&&(0,e.jsx)(ao.Z,{sx:{position:"absolute",bottom:0,width:"100%"}})]}),(0,e.jsx)(V.Z,{variant:"body2",sx:{fontSize:12,maxWidth:56,color:v!=null&&v.boxdata.usercfgs.bgimg?"#fff":"unset",width:"100%",fontWeight:"bold",textShadow:v!=null&&v.boxdata.usercfgs.bgimg?"black 0.1em 0.1em 0.2em":"unset"},noWrap:!0,children:t==null?void 0:t.name})]})},"".concat(t==null?void 0:t.id,"/").concat(t==null?void 0:t.author,"/").concat(t==null?void 0:t.name)),eo&&(v==null?void 0:v.isMobile)&&(0,e.jsx)(s.Z,{sx:{zIndex:-1,opacity:.5,position:"fixed",left:y==null?void 0:y.x,top:y==null?void 0:y.y},spacing:1,justifyContent:"center",alignItems:"center",children:(0,e.jsx)(A.Z,{sx:{width:40,height:40,borderRadius:2,overflow:"hidden",position:"relative",boxShadow:function(n){return n.shadows[4]}},children:(0,e.jsx)(z.Z,{variant:"square",alt:t==null?void 0:t.name,src:t==null?void 0:t.icon,sx:{width:"100%",height:"100%"}})})})]})},lo=(0,O.memo)(so);function uo(){var x,r=(0,h.useModel)("@@initialState"),u=r.initialState,t=(0,_.L)(function(){return{accept:"grid"}}),K=C()(t,2),P=K[1],L=(u==null||(x=u.boxdata)===null||x===void 0?void 0:x.usercfgs.favapps.map(function(a){return u==null?void 0:u.apps.find(function(f){return f.id===a})}).filter(function(a){return!!a}))||[],U=(0,O.useState)(L),k=C()(U,2),c=k[0],m=k[1],Z=(0,O.useCallback)(function(a){var f=c.filter(function(d){return"".concat(d==null?void 0:d.id,"_").concat(d==null?void 0:d.author)===a})[0];return{card:f,index:c.indexOf(f)}},[c]),v=(0,O.useCallback)(function(a,f){var d=Z(a),D=d.card,p=d.index;m(i()(c,{$splice:[[p,1],[f,0,D]]}))},[Z,c,m]),I=u==null?void 0:u.ui(u.boxdata);return(0,e.jsx)(s.Z,{ref:P,direction:"row",flexWrap:"wrap",children:c==null?void 0:c.map(function(a,f){var d;I==null||I.loadAppBaseInfo(a);var D=null;if(a!=null&&a.script)D=a==null?void 0:a.script;else if(a!=null&&a.scripts&&a!==null&&a!==void 0&&(d=a.scripts[0])!==null&&d!==void 0&&d.script){var p;D=a==null||(p=a.scripts[0])===null||p===void 0?void 0:p.script}return(0,e.jsx)(lo,{item:a,data:c,script:D,findCard:Z,moveCard:v,index:f},"".concat(a==null?void 0:a.id,"-").concat(a==null?void 0:a.author))})})}function vo(){var x=(0,h.useModel)("@@initialState"),r=x.initialState;return(0,e.jsx)(W.Z,{interval:[100,0],appear:!!(r!=null&&r.boxdata.usercfgs.isAnimate),children:(0,e.jsx)(A.Z,{pt:1,component:"div",children:(0,e.jsx)(R.W,{options:{delay:400},backend:r!=null&&r.isMobile?B.zr:l.PD,children:(0,e.jsx)(uo,{})})},"container")})}},37048:function(to,E,o){o.r(E),o.d(E,{default:function(){return z}});var F=o(86587),C={time:"time___Bepo5"},w=o(22148),G=o(98396),T=o(51233),b=o(15861),N=o(67720),h=o(87357),$=o(69661),J=o(97458),Q=o(67294),s=o(85893),A=function(){var V=(0,G.Z)("(min-width:960px)"),X=(0,w.useModel)("@@initialState"),i=X.initialState,W=i==null?void 0:i.boxdata.datas["@SET_TIME.CACHE"],O=(i==null?void 0:i.boxdata.datas["@SET_TIME.TASK"])||{};console.log(O);var H=[];return W==null||W.forEach(function(_){var R={title:_.name,children:Object.values(_.task)};H.push(R)}),(0,s.jsx)(J.Z,{interval:[100,0],appear:!!(i!=null&&i.boxdata.usercfgs.isAnimate),children:(0,s.jsx)(T.Z,{sx:{p:1},children:H.map(function(_,R){return(0,s.jsxs)(Q.Fragment,{children:[(0,s.jsx)(b.Z,{variant:"h6",component:"h2",sx:{color:i!=null&&i.boxdata.usercfgs.bgimg?"#fff":"unset",textShadow:i!=null&&i.boxdata.usercfgs.bgimg?"black 0.1em 0.1em 0.2em":"unset"},children:_.title}),(0,s.jsx)(N.Z,{sx:{mt:1,mb:1,borderColor:function(B){return B.palette.primary.main}}}),(0,s.jsx)(T.Z,{direction:"row",flexWrap:"wrap",children:_.children.map(function(l){return(0,s.jsx)(F.Item,{sx:{flex:V?"0 0 ".concat(100/6,"%"):"0 0 25%",pt:1,pb:1},onClick:function(){return w.history.push("/task/".concat(_.title,"_").concat(l.tag))},children:(0,s.jsxs)(T.Z,{spacing:1,justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(h.Z,{sx:{width:56,height:56,borderRadius:3,overflow:"hidden",position:"relative",boxShadow:function(e){return e.shadows[5]}},children:(0,s.jsx)($.Z,{variant:"square",alt:l==null?void 0:l.tag,className:C.time,src:l==null?void 0:l["img-url"],sx:{width:"100%",height:"100%"}})}),(0,s.jsx)(b.Z,{variant:"body2",sx:{fontSize:12,maxWidth:56,color:i!=null&&i.boxdata.usercfgs.bgimg?"#fff":"unset",width:"100%",fontWeight:"bold",textShadow:i!=null&&i.boxdata.usercfgs.bgimg?"black 0.1em 0.1em 0.2em":"unset"},noWrap:!0,children:l==null?void 0:l.tag})]})},l.url)})})]},"".concat(_.title,"-").concat(R))})})})},z=A},58291:function(to,E){E.Z={logo:"https://raw.githubusercontent.com/Orz-3/mini/master/Color/box.png",userCfgs:"chavy_boxjs_userCfgs",sessions:"chavy_boxjs_sessions",app_subCaches:"chavy_boxjs_app_subCaches",backups:"chavy_boxjs_backups",cursessions:"chavy_boxjs_cur_sessions",gistCacheKey:"@chavy_boxjs_userCfgs.gist_cache_key",viewkeys:"@chavy_boxjs_userCfgs.viewkeys"}}}]);
