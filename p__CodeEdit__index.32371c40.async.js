"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[23],{82527:function(q,u,e){e.r(u),e.d(u,{monaco:function(){return y}});var p=e(15009),P=e.n(p),R=e(99289),T=e.n(R),b=e(5574),j=e.n(b),r=e(22148),A=e(37125),I=e(3018),S=e(24519),U=e(87357),L=e(90629),s=e(51233),B=e(15861),W=e(98456),K=e(22169),y=e(91739),d=e(67294),$=e(2302),t=e(85893),Z=["/** "," * \u6CE8\u610F: "," * \u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u4F7F\u7528\u5B8C\u6574\u7684 EnvJs \u73AF\u5883"," * "," * \u540C\u65F6: "," * \u4F60`\u5FC5\u987B`\u624B\u52A8\u8C03\u7528 $done()"," * "," * \u56E0\u4E3A: "," * BoxJs \u4E0D\u4E3A\u4E3B\u52A8\u6267\u884C\u7684\u811A\u672C\u8C03\u7528 $done()"," * \u800C\u628A $done \u7684\u65F6\u673A\u5B8C\u5168\u4EA4\u7531\u811A\u672C\u63A7\u5236"," * "," * \u6700\u540E: "," * \u8FD9\u6BB5\u811A\u672C\u662F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C\u7684!"," */ ",'const host = $.getdata("boxjs_host")','console.log("\u8F93\u51FA\u7684\u5185\u5BB9\u662F\u8FD4\u56DE\u7ED9\u6D4F\u89C8\u5668\u7684!")',"$.msg($.name, host)","$.done()","// $done() \u6216 $.done() \u90FD\u53EF\u4EE5"],z=["/** "," * \u6CE8\u610F: "," * \u4F60\u6B63\u5728\u4F7F\u7528 Surge HTTP-API \u73AF\u5883"," * "," * \u5728\u8FD9\u91CC\uFF1A\u4F60\u4E0D\u53EF\u4EE5\u4F7F\u7528 EnvJs"," * \u8BF7\u786E\u4FDD\uFF1A\u4F60\u7684\u811A\u672C\u80FD\u88AB Surge \u72EC\u7ACB\u8FD0\u884C"," * "," * \u6700\u540E: "," * \u8FD9\u6BB5\u811A\u672C\u662F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C\u7684!"," */ ",'const host = $persistentStore.read("boxjs_host")','const msgs = [""]',"",'msgs.push("\u8FD9\u662F\u65E5\u5FD7\u7684\u5185\u5BB9")','msgs.push("BoxJs host: " + host)',"",'console.log(msgs.join("\\n"))',"$done()"],F=function(){var m,c=(0,d.useRef)(null),J=(0,r.useModel)("alert"),G=(0,r.useModel)("@@initialState"),n=G.initialState,V=(0,r.useModel)("api"),M=V.fetchRunScript,H=(0,r.useSearchParams)(),N=j()(H,1),Q=N[0],v=Q.get("url"),X=(n==null||(m=n.boxdata)===null||m===void 0?void 0:m.syscfgs.env)==="Surge"&&n!==null&&n!==void 0&&n.boxdata.usercfgs.httpapi?z.join(`
`):Z.join(`
`),Y=(0,d.useState)(v?"":X),x=j()(Y,2),a=x[0],i=x[1],g=(0,r.useRequest)(function(_){return(0,r.request)(_)},{manual:!0,formatResult:function(o){return o},onSuccess:function(o){i(o)}});return(0,d.useEffect)(function(){v&&g.run(v)},[]),(0,t.jsxs)(U.Z,{pt:2,children:[(0,t.jsxs)(L.Z,{children:[(0,t.jsxs)(s.Z,{sx:{p:1},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(s.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsx)(B.Z,{variant:"h6",children:"\u811A\u672C\u7F16\u8F91\u5668"}),(0,t.jsx)(s.Z,{onClick:function(){var o;(o=c.current)===null||o===void 0||o.click()},alignItems:"center",direction:"row",children:(0,t.jsx)(S.Z,{color:"primary",sx:{fontSize:24}})})]}),(0,t.jsxs)(s.Z,{alignItems:"center",sx:{position:"relative"},onClick:function(){a&&M.run({script:a})},children:[(0,t.jsx)(I.Z,{color:"primary",sx:{fontSize:24}}),M.loading&&(0,t.jsx)(W.Z,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]}),n!=null&&n.isMobile?(0,t.jsx)(K.ZP,{value:a,style:{fontSize:12},maxWidth:"100%",extensions:[(0,A.eJ)()],height:"calc(100vh - 240px)",theme:(n==null?void 0:n.mode)==="dark"?"dark":"light",onChange:function(o){return i(o)}}):(0,t.jsx)($.ZP,{width:"100%",value:g.loading?"//...Loading":a,height:"calc(100vh - 200px)",theme:(n==null?void 0:n.mode)==="dark"?"vs-dark":"vs",onChange:function(o){i(o)},options:{fontSize:12,tabSize:2,contextmenu:!1,selectOnLineNumbers:!0,minimap:{enabled:!1}}})]}),(0,t.jsx)("input",{ref:c,type:"file",style:{display:"none"},onChange:function(){var o,l=(o=c.current)===null||o===void 0?void 0:o.files;if(!(l!=null&&l.length))return J.alert({message:"\u8BF7\u9009\u62E9\u6587\u4EF6",type:"error"});var O=new FileReader;O.readAsText(l[0],"UTF-8"),O.onload=function(){var k=T()(P()().mark(function D(E){var h,C;return P()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:C=E==null||(h=E.target)===null||h===void 0?void 0:h.result;try{i(C)}catch(w){console.log(w)}case 2:case"end":return f.stop()}},D)}));return function(D){return k.apply(this,arguments)}}()}})]})};u.default=F}}]);
