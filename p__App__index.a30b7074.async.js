"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[202],{92398:function(I,m,o){o.r(m),o.d(m,{default:function(){return q}});var R=o(19632),O=o.n(R),T=o(97857),u=o.n(T),D=o(58291),f=o(22148),L=o(75716),y=o(91811),B=o(24410),Z=o(14957),K=o(43329),l=o(90948),S=o(82280),U=o(38895),W=o(22797),F=o(59334),$=o(97212),z=o(90629),J=o(51233),h=o(69661),N=o(15861),G=o(78462),b=o(93946),V=o(98619),w=o(18987),C=o(97458),j=o(67294),r=o(85893),H=(0,l.ZP)(function(e){return(0,r.jsx)(S.Z,u()({disableGutters:!0,elevation:0,square:!0},e))})(function(){return{}}),Q=(0,l.ZP)(function(e){return(0,r.jsx)(U.Z,u()({expandIcon:(0,r.jsx)(L.Z,{sx:{fontSize:"0.9rem"}})},e))})(function(e){var _=e.theme;return{padding:0,paddingRight:10,backgroundColor:_.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, 0)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:_.spacing(1)}}}),X=(0,l.ZP)(W.Z)(function(e){var _=e.theme;return{padding:_.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}),Y=(0,l.ZP)(F.Z)(function(){return{"& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),k=(0,l.ZP)($.ZP)(function(){return{paddingLeft:8}});function q(){var e,_=(0,f.useModel)("app"),E=_.expanded,nn=_.setExpanded,an=(0,f.useModel)("@@initialState"),n=an.initialState,on=(n==null?void 0:n.apps)||[],rn=(0,f.useModel)("api"),A=rn.fetchSave,p=[],sn=(n==null?void 0:n.boxdata.sysapps)||[],x=[];n==null||n.boxdata.usercfgs.appsubs.forEach(function(i){if(n!=null&&n.boxdata.appSubCaches[i.url]){var a=n==null?void 0:n.boxdata.appSubCaches[i.url];x.push(a)}}),n==null||n.boxdata.usercfgs.favapps.forEach(function(i){var a=on.find(function(s){return s.id===i});a&&p.push(a)}),x=[].concat(O()(p.length?[{id:"favApp.id",name:"\u6536\u85CF\u5E94\u7528",description:"\u6536\u85CF\u5E94\u7528",author:"",icon:(0,r.jsx)(y.Z,{sx:{color:function(a){return a.palette.common.white}}}),repo:"",apps:p,task:[],updateTime:""}]:[]),O()(x),[{id:"sysApp.id",name:"\u7CFB\u7EDF\u5E94\u7528",description:"\u7CFB\u7EDF\u5E94\u7528",author:"",icon:(0,r.jsx)(B.Z,{sx:{color:function(a){return a.palette.common.white}}}),repo:"",apps:sn,task:[],updateTime:""}]);var g=n==null||(e=n.ui)===null||e===void 0?void 0:e.call(n,n==null?void 0:n.boxdata),en=function(a){return function(s,M){nn(M?a:void 0)}},tn=function(a){var s=document.getElementById(a);s&&s.scrollIntoView({behavior:"smooth",block:"center"})};return(0,j.useEffect)(function(){E&&setTimeout(function(){return tn(E)},1e3)},[]),(0,r.jsx)(C.Z,{style:{marginTop:16},appear:!!(n!=null&&n.boxdata.usercfgs.isAnimate),children:x.map(function(i){return(0,r.jsx)(z.Z,{elevation:3,sx:{mb:2,overflow:"hidden",borderRadius:function(s){return s.spacing(2)}},children:(0,r.jsxs)(H,{expanded:E===i.id,onChange:en(i.id),sx:{borderRadius:function(s){return s.spacing(2)},overflow:"hidden"},children:[(0,r.jsx)(Q,{"aria-controls":i.id,id:i.id,children:(0,r.jsxs)(J.Z,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:[typeof i.icon=="string"?(0,r.jsx)(h.Z,{id:i.id,src:i.icon,sx:{boxShadow:function(s){return s.shadows[1]}}}):(0,r.jsx)(h.Z,{id:i.id,sx:{boxShadow:function(s){return s.shadows[1]},bgcolor:function(s){return s.palette.primary.main}},children:i.icon}),(0,r.jsx)(N.Z,{children:i.name})]})}),(0,r.jsx)(X,{sx:{padding:0},children:(0,r.jsx)(C.Z,{type:["top","bottom"],leaveReverse:!0,children:E===i.id?(0,r.jsx)(G.Z,{sx:{padding:0,bgcolor:"background.paper"},children:i.apps.map(function(a,s){var M=p.find(function(c){return c.id===a.id});return g==null||g.loadAppBaseInfo(a),(0,r.jsx)(j.Fragment,{children:(0,r.jsx)(k,{secondaryAction:M?(0,r.jsx)(b.Z,{edge:"end","aria-label":"cancelFav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var t,P=n==null?void 0:n.boxdata.usercfgs.favapps.find(function(v){return v===a.id});if(P){var d=n==null?void 0:n.boxdata.usercfgs;A.run({key:D.Z.userCfgs,val:JSON.stringify(u()(u()({},d),{},{favapps:d==null||(t=d.favapps)===null||t===void 0?void 0:t.filter(function(v){return v!==a.id})}))})}},children:(0,r.jsx)(Z.Z,{color:"primary"})}):(0,r.jsx)(b.Z,{edge:"end","aria-label":"fav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var t,P=n==null?void 0:n.boxdata.usercfgs.favapps.find(function(v){return v===a.id});if(!P){var d=n==null?void 0:n.boxdata.usercfgs;d==null||(t=d.favapps)===null||t===void 0||t.push(a.id),A.run({key:D.Z.userCfgs,val:JSON.stringify(u()({},d))})}},children:(0,r.jsx)(K.Z,{})}),children:(0,r.jsxs)(V.Z,{sx:{padding:0,pr:"0 !important"},onClick:function(){f.history.push("/app/".concat(a.id))},children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)(h.Z,{alt:a.name[0],src:a.icon,sx:{boxShadow:function(t){return t.shadows[1]}}})}),(0,r.jsx)(Y,{primary:a.name,secondary:a.repo})]})},"".concat(a.id,"-").concat(s))},"".concat(a.id,"-").concat(s))})},"app_list"):null})})]})},i.id)})})}},58291:function(I,m){m.Z={logo:"https://raw.githubusercontent.com/Orz-3/mini/master/Color/box.png",userCfgs:"chavy_boxjs_userCfgs",sessions:"chavy_boxjs_sessions",app_subCaches:"chavy_boxjs_app_subCaches",backups:"chavy_boxjs_backups",cursessions:"chavy_boxjs_cur_sessions",gistCacheKey:"@chavy_boxjs_userCfgs.gist_cache_key"}}}]);
