"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{16961:function(de,T,e){var G=e(52677),L=e.n(G),N=e(97857),f=e.n(N),Q=e(19632),y=e.n(Q),X=e(5574),v=e.n(X),p=e(13769),w=e.n(p),c=e(44842),P=e(22148),b=e(40625),g=e(42761),q=e(90089),R=e(93946),I=e(42293),ee=e(10155),U=e(78462),Z=e(97212),S=e(59334),_e=e(15861),F=e(83321),ae=e(50657),k=e(31425),ne=e(50480),V=e(75438),_=e(36872),te=e(72890),i=e(93109),u=e(67294),n=e(85893),z=["defaultValue"],A=(0,u.forwardRef)(function(K,$){var oe=K.defaultValue,h=w()(K,z),Y=u.useState(!1),B=v()(Y,2),W=B[0],H=B[1],m=(0,u.useState)(oe),J=v()(m,2),x=J[0],O=J[1],re=(0,u.useState)(""),s=v()(re,2),t=s[0],r=s[1],E=(0,i.Z)(t,{wait:100}),j=(0,P.useModel)("@@initialState"),o=j.initialState,M=[{id:"extra_data_key",name:"\u975E\u8BA2\u9605\u6570\u636E",_id:"extra_data_key@local",keys:(o==null?void 0:o.boxdata.usercfgs.gist_cache_key)||[],descs_html:[],author:"local",repo:"",icons:[]}].concat(y()(((o==null?void 0:o.boxdata.sysapps)||[]).filter(function(a){return a.keys&&!!a.keys.length})));Object.values((o==null?void 0:o.boxdata.appSubCaches)||{}).forEach(function(a){M=[].concat(y()(M),y()(a.apps.filter(function(l){return l.keys&&!!l.keys.length})))}),M=M.filter(function(a){return a.name.indexOf(E)>-1||!E?!0:!!a.keys.find(function(l){return l.indexOf(E)>-1})});var d=o==null?void 0:o.boxdata.datas;(0,u.useImperativeHandle)($,function(){return{value:x}}),(0,u.useEffect)(function(){O(h.value)},[h.value]);var le=function(){H(!1),r("")},ue=function(l){var D;O(l),(D=h.onChange)===null||D===void 0||D.call(h,{target:{name:h.name,value:l}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z,f()(f()({},h),{},{value:x,onChange:function(l){ue(l.target.value)},size:"small",type:"text",endAdornment:(0,n.jsx)(R.Z,{size:"small","aria-label":h.name,onClick:function(){H(!0)},children:(0,n.jsx)(b.Z,{fontSize:"small",sx:{color:function(l){return l.palette.primary.main}}})})})),(0,n.jsxs)(ae.Z,{open:W,onClose:function(){return le()},sx:{mt:15,mb:15,"& .MuiDialog-paper":{width:"100%"}},children:[(0,n.jsx)(I.Z,{position:"static",sx:{background:function(l){return l.palette.primary.main}},children:(0,n.jsx)(ee.Z,{children:(0,n.jsxs)(c.ol,{children:[(0,n.jsx)(c.el,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0\u6216\u7F13\u5B58Key",inputProps:{"aria-label":"search"},onChange:function(l){r(l.target.value)}}),(0,n.jsx)(c.cB,{children:(0,n.jsx)(g.Z,{})})]})})}),(0,n.jsx)(U.Z,{subheader:(0,n.jsx)("li",{}),sx:{position:"relative",overflow:"auto",minHeight:300,"& ul":{padding:0}},children:(0,n.jsx)(te.Z,{name:"radio-buttons-group",onChange:function(l,D){ue(D)},children:M.length>0?M.map(function(a,l){var D,se,ie="".concat(a.id,"_").concat(a.author,"_").concat(l);return(0,n.jsxs)("li",{style:{width:"100%",boxSizing:"border-box"},children:[(0,n.jsxs)(V.Z,{sx:{borderBottom:"1px solid rgba(0, 0, 0, .125)",mt:0},children:[a==null?void 0:a.name,"\uFF08",a==null||(D=a.keys)===null||D===void 0?void 0:D.length,"\uFF09"]}),a==null||(se=a.keys)===null||se===void 0?void 0:se.map(function(C){return(0,n.jsx)(Z.ZP,{sx:{p:0,pl:3,pr:3},children:(0,n.jsx)(S.Z,{id:ie,primary:(0,n.jsx)(ne.Z,{value:C,control:(0,n.jsx)(_.Z,{}),label:C,sx:{"& .MuiFormControlLabel-label":{width:"80%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"noWrap"}}}),primaryTypographyProps:{noWrap:!0,variant:"caption",sx:{fontWeight:"bold"}},secondary:(0,n.jsx)(_e.Z,{noWrap:!0,color:"grey",variant:"caption",component:"div",children:(L()(d==null?void 0:d[C])==="object"&&(d!=null&&d[C])?JSON.stringify(d==null?void 0:d[C]):d==null?void 0:d[C])||"\u65E0\u6570\u636E"})})},"".concat(ie,"-").concat(C))})]},"section-".concat(ie))}):(0,n.jsx)(Z.ZP,{sx:{height:290,textAlign:"center"},children:(0,n.jsx)(S.Z,{primary:"\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C"})})})}),(0,n.jsxs)(k.Z,{sx:{borderTop:"1px solid rgba(0, 0, 0, .125)"},children:[(0,n.jsx)(F.Z,{color:"inherit",onClick:function(){return le()},children:"\u53D6\u6D88"}),(0,n.jsx)(F.Z,{onClick:function(){return le()},autoFocus:!0,children:"\u786E\u5B9A"})]})]})]})});T.Z=A},24020:function(de,T,e){e.r(T),e.d(T,{default:function(){return te}});var G=e(19632),L=e.n(G),N=e(97857),f=e.n(N),Q=e(5574),y=e.n(Q),X=e(16961),v=e(58291),p=e(22148),w=e(23508),c=e(51233),P=e(15861),b=e(87918),g=e(67720),q=e(2180),R=e(90629),I=e(87357),ee=e(56815),U=e(83321),Z=e(50135),S=e(82280),_e=e(22797),F=e(38895),ae=e(20640),k=e.n(ae),ne=e(67294),V=e(87536),_=e(85893);function te(){var i=(0,V.cI)(),u=(0,p.useModel)("alert"),n=(0,ne.useState)("delKey"),z=y()(n,2),A=z[0],K=z[1],$=(0,p.useModel)("app"),oe=$.expanded,h=$.handleExpandedChange,Y=(0,p.useModel)("api"),B=Y.fetchDataKey,W=Y.fetchSave,H=(0,p.useModel)("@@initialState"),m=H.initialState,J=Object.keys((m==null?void 0:m.boxdata.datas)||{}),x=(m==null?void 0:m.boxdata.usercfgs.gist_cache_key)||[],O=(m==null?void 0:m.boxdata.usercfgs.viewkeys)||[],re=[{data:x,key:v.Z.gistCacheKey,title:"\u975E\u8BA2\u9605\u6570\u636E\uFF08".concat(x.length,"\uFF09")},{key:v.Z.viewkeys,title:"\u8FD1\u671F\u67E5\u770B\uFF08".concat(O.length,"\uFF09"),data:O}];return(0,_.jsxs)(c.Z,{spacing:3,m:1,children:[re.map(function(s,t){return s.data.length?(0,_.jsx)(c.Z,{direction:"column",mt:2,children:(0,_.jsxs)(S.Z,{onChange:h(s.key),expanded:oe.indexOf(s.key)!==-1,children:[(0,_.jsx)(F.Z,{sx:{m:0},expandIcon:(0,_.jsx)(w.Z,{}),"aria-controls":"panel".concat(t,"-content"),id:"panel".concat(t,"-header"),children:(0,_.jsx)(P.Z,{variant:"body2",children:s.title})}),(0,_.jsx)(_e.Z,{children:(0,_.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:s.data.map(function(r,E){return(0,_.jsx)("div",{style:{padding:3},children:(0,_.jsx)(b.Z,{label:r,variant:"filled",sx:{maxWidth:160,"& span":{width:"100%"},boxShadow:function(o){return"0px 0 1px ".concat(o.palette.primary.main)}},onDelete:function(){var o=[{key:s.key,val:s.data.filter(function(M){return M!==r})}];A==="all"&&o.push({key:s.key,val:null}),W.run(o)},onClick:function(){i.setValue("key",r),B.run(r).then(function(o){i.setValue("data",o.val)})}})},"".concat(r,"_").concat(E))})})}),(0,_.jsx)(g.Z,{}),(0,_.jsx)(q.Z,{children:(0,_.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%",p:1},children:[(0,_.jsx)(b.Z,{label:"\u5220\u9664\u952E\u548C\u503C",size:"small",onClick:function(){return K("all")},color:A==="all"?"primary":void 0}),(0,_.jsx)(b.Z,{label:"\u4EC5\u5220\u9664\u952E",size:"small",onClick:function(){return K("delKey")},color:A==="delKey"?"primary":void 0})]})})]})},s.title):null}),(0,_.jsxs)(R.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(I.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(P.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,_.jsx)(P.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=i.getValues("key");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});k()(t),u.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(V.Qr,{name:"key",control:i.control,render:function(t){var r=t.field;return(0,_.jsx)(X.Z,f()(f()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},r),{},{onChange:function(j){i.setValue("data",""),r.onChange(j)}}))}}),(0,_.jsx)(ee.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,_.jsx)(g.Z,{}),(0,_.jsx)(c.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(U.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=i.getValues("key");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});O.includes(t)||W.run({key:v.Z.viewkeys,val:[t].concat(L()(O))}),B.run(t).then(function(r){i.setValue("data",r.val)})},children:"\u67E5\u8BE2"})})]}),(0,_.jsxs)(R.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(I.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(P.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,_.jsx)(P.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=i.getValues("key");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});k()(t),u.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(Z.Z,f()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},i.register("data")))]}),(0,_.jsx)(g.Z,{}),(0,_.jsx)(c.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(U.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=i.getValues("key"),r=i.getValues("data");if(!t)return u.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var E=[{key:t,val:r}];!J.includes(t)&&!x.includes(t)?E.push({key:v.Z.gistCacheKey,val:[t].concat(L()(x))}):x.includes(t)&&!r&&E.push({key:v.Z.gistCacheKey,val:x.filter(function(j){return j!==t})}),W.run(E)},children:"\u4FDD\u5B58"})})]})]})}}}]);
