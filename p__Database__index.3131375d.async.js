"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{16961:function(le,A,e){var I=e(52677),U=e.n(I),Z=e(97857),P=e.n(Z),S=e(19632),D=e.n(S),F=e(5574),d=e.n(F),j=e(13769),V=e.n(j),O=e(44842),B=e(22148),z=e(40625),W=e(42761),L=e(90089),$=e(93946),Y=e(42293),H=e(10155),J=e(78462),R=e(97212),b=e(59334),k=e(15861),K=e(83321),E=e(50657),a=e(31425),G=e(50480),y=e(75438),g=e(36872),r=e(72890),x=e(93109),v=e(67294),_=e(85893),T=["defaultValue"],N=(0,v.forwardRef)(function(C,Q){var m=C.defaultValue,o=V()(C,T),t=v.useState(!1),s=d()(t,2),c=s[0],f=s[1],se=(0,v.useState)(m),_e=d()(se,2),ae=_e[0],ne=_e[1],ie=(0,v.useState)(""),te=d()(ie,2),ue=te[0],oe=te[1],X=(0,x.Z)(ue,{wait:100}),de=(0,B.useModel)("@@initialState"),i=de.initialState,p=[{id:"extra_data_key",name:"\u975E\u8BA2\u9605\u6570\u636E",_id:"extra_data_key@local",keys:(i==null?void 0:i.boxdata.usercfgs.gist_cache_key)||[],descs_html:[],author:"local",repo:"",icons:[]}];Object.values((i==null?void 0:i.boxdata.appSubCaches)||{}).forEach(function(n){p=[].concat(D()(p),D()(n.apps.filter(function(l){return!!l.keys})))}),p=[].concat(D()(p),D()((i==null?void 0:i.boxdata.sysapps)||[])).filter(function(n){return n.name.indexOf(X)>-1||!X?!0:!!n.keys.find(function(l){return l.indexOf(X)>-1})});var u=i==null?void 0:i.boxdata.datas;(0,v.useImperativeHandle)(Q,function(){return{value:ae}}),(0,v.useEffect)(function(){ne(o.value)},[o.value]);var w=function(){f(!1),oe("")},re=function(l){var h;ne(l),(h=o.onChange)===null||h===void 0||h.call(o,{target:{name:o.name,value:l}})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(L.Z,P()(P()({value:ae},o),{},{onChange:function(l){re(l.target.value)},size:"small",type:"text",endAdornment:(0,_.jsx)($.Z,{size:"small","aria-label":o.name,onClick:function(){f(!0)},children:(0,_.jsx)(z.Z,{fontSize:"small"})})})),(0,_.jsxs)(E.Z,{open:c,onClose:function(){return w()},sx:{mt:15,mb:15,"& .MuiDialog-paper":{width:"100%"}},children:[(0,_.jsx)(Y.Z,{position:"static",children:(0,_.jsx)(H.Z,{children:(0,_.jsxs)(O.ol,{children:[(0,_.jsx)(O.el,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0\u6216\u7F13\u5B58Key",inputProps:{"aria-label":"search"},onChange:function(l){oe(l.target.value)}}),(0,_.jsx)(O.cB,{children:(0,_.jsx)(W.Z,{})})]})})}),(0,_.jsx)(J.Z,{subheader:(0,_.jsx)("li",{}),sx:{position:"relative",overflow:"auto",minHeight:300,"& ul":{padding:0}},children:(0,_.jsx)(r.Z,{name:"radio-buttons-group",onChange:function(l,h){re(h)},children:p.length>0?p.map(function(n,l){var h,q,ee="".concat(n.id,"_").concat(n.author,"_").concat(l);return(0,_.jsxs)("li",{style:{width:"100%",boxSizing:"border-box"},children:[(0,_.jsxs)(y.Z,{sx:{borderBottom:"1px solid rgba(0, 0, 0, .125)",mt:0},children:[n==null?void 0:n.name,"\uFF08",n==null||(h=n.keys)===null||h===void 0?void 0:h.length,"\uFF09"]}),n==null||(q=n.keys)===null||q===void 0?void 0:q.map(function(M){return(0,_.jsx)(R.ZP,{sx:{p:0,pl:3,pr:3},children:(0,_.jsx)(b.Z,{id:ee,primary:(0,_.jsx)(G.Z,{value:M,control:(0,_.jsx)(g.Z,{}),label:M,sx:{"& .MuiFormControlLabel-label":{width:"80%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"noWrap"}}}),primaryTypographyProps:{noWrap:!0,variant:"caption",sx:{fontWeight:"bold"}},secondary:(0,_.jsx)(k.Z,{noWrap:!0,color:"grey",variant:"caption",component:"div",children:(U()(u==null?void 0:u[M])==="object"&&(u!=null&&u[M])?JSON.stringify(u==null?void 0:u[M]):u==null?void 0:u[M])||"\u65E0\u6570\u636E"})})},"".concat(ee,"-").concat(M))})]},"section-".concat(ee))}):(0,_.jsx)(R.ZP,{sx:{height:290,textAlign:"center"},children:(0,_.jsx)(b.Z,{primary:"\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C"})})})}),(0,_.jsxs)(a.Z,{sx:{borderTop:"1px solid rgba(0, 0, 0, .125)"},children:[(0,_.jsx)(K.Z,{onClick:function(){return w()},children:"\u53D6\u6D88"}),(0,_.jsx)(K.Z,{onClick:function(){return w()},autoFocus:!0,children:"\u786E\u5B9A"})]})]})]})});A.Z=N},24020:function(le,A,e){e.r(A),e.d(A,{default:function(){return G}});var I=e(19632),U=e.n(I),Z=e(97857),P=e.n(Z),S=e(16961),D=e(22148),F=e(23508),d=e(51233),j=e(15861),V=e(87918),O=e(90629),B=e(87357),z=e(56815),W=e(67720),L=e(83321),$=e(50135),Y=e(82280),H=e(22797),J=e(38895),R=e(20640),b=e.n(R),k=e(67294),K=e(87536),E=e(58291),a=e(85893);function G(){var y,g,r=(0,K.cI)(),x=(0,D.useModel)("alert"),v=(0,D.useModel)("api"),_=v.fetchDataKey,T=v.fetchSave,N=(0,D.useModel)("@@initialState"),C=N.initialState,Q=Object.keys((C==null?void 0:C.boxdata.datas)||{}),m=((y=_.fetches[E.Z.gistCacheKey])===null||y===void 0||(g=y.data)===null||g===void 0?void 0:g.val)||[];return(0,k.useEffect)(function(){_.run(E.Z.gistCacheKey)},[]),(0,a.jsxs)(d.Z,{spacing:3,m:1,children:[m.length>0&&(0,a.jsx)(d.Z,{direction:"column",mt:2,children:(0,a.jsxs)(Y.Z,{children:[(0,a.jsx)(J.Z,{sx:{m:0},expandIcon:(0,a.jsx)(F.Z,{}),"aria-controls":"panel1-content",id:"panel1-header",children:(0,a.jsxs)(j.Z,{variant:"body2",children:["\u975E\u8BA2\u9605\u6570\u636E\uFF08",m.length,"\uFF09"]})}),(0,a.jsx)(H.Z,{children:(0,a.jsx)(d.Z,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:m.map(function(o,t){return(0,a.jsx)("div",{style:{padding:5},children:(0,a.jsx)(V.Z,{label:o,variant:"outlined",sx:{maxWidth:120,"& span":{width:"100%"}},onDelete:function(){T.run([{key:o,val:""},{key:E.Z.gistCacheKey,val:m.filter(function(c){return c!==o})}]).then(function(){_.run(E.Z.gistCacheKey)})},onClick:function(){r.setValue("key",o),_.run(o).then(function(c){r.setValue("data",c.val)})}})},"".concat(o,"_").concat(t))})})})]})}),(0,a.jsxs)(O.Z,{elevation:3,sx:{pt:2},children:[(0,a.jsxs)(B.Z,{pr:2,pl:2,pb:1,children:[(0,a.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,a.jsx)(j.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,a.jsx)(j.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=r.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});b()(t),x.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,a.jsx)(K.Qr,{name:"key",control:r.control,render:function(t){var s=t.field;return(0,a.jsx)(S.Z,P()(P()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},s),{},{onChange:function(f){r.setValue("data",""),s.onChange(f)}}))}}),(0,a.jsx)(z.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,a.jsx)(W.Z,{}),(0,a.jsx)(d.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,a.jsx)(L.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=r.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});_.run(t).then(function(s){r.setValue("data",s.val)})},children:"\u67E5\u8BE2"})})]}),(0,a.jsxs)(O.Z,{elevation:3,sx:{pt:2},children:[(0,a.jsxs)(B.Z,{pr:2,pl:2,pb:1,children:[(0,a.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,a.jsx)(j.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,a.jsx)(j.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=r.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});b()(t),x.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,a.jsx)($.Z,P()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},r.register("data")))]}),(0,a.jsx)(W.Z,{}),(0,a.jsx)(d.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,a.jsx)(L.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=r.getValues("key"),s=r.getValues("data");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var c=[{key:t,val:s}];!Q.includes(t)&&!m.includes(t)?c.push({key:E.Z.gistCacheKey,val:[].concat(U()(m),[t])}):m.includes(t)&&!s&&c.push({key:E.Z.gistCacheKey,val:m.filter(function(f){return f!==t})}),T.run(c).then(function(){c.length>1&&_.run(E.Z.gistCacheKey)})},children:"\u4FDD\u5B58"})})]})]})}}}]);
