"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{16961:function(de,L,e){var J=e(52677),R=e.n(J),G=e(97857),O=e.n(G),N=e(19632),f=e.n(N),Q=e(5574),m=e.n(Q),C=e(13769),X=e.n(C),p=e(44842),E=e(22148),j=e(40625),y=e(42761),b=e(90089),w=e(93946),q=e(42293),I=e(10155),U=e(78462),Z=e(97212),A=e(59334),ee=e(15861),S=e(83321),_e=e(50657),ae=e(31425),ne=e(50480),F=e(75438),te=e(36872),k=e(72890),_=e(93109),h=e(67294),a=e(85893),x=["defaultValue"],oe=(0,h.forwardRef)(function(g,K){var V=g.defaultValue,c=X()(g,x),le=h.useState(!1),z=m()(le,2),$=z[0],B=z[1],W=(0,h.useState)(V),Y=m()(W,2),d=Y[0],H=Y[1],D=(0,h.useState)(""),M=m()(D,2),re=M[0],s=M[1],t=(0,_.Z)(re,{wait:100}),i=(0,E.useModel)("@@initialState"),o=i.initialState,u=[{id:"extra_data_key",name:"\u975E\u8BA2\u9605\u6570\u636E",_id:"extra_data_key@local",keys:(o==null?void 0:o.boxdata.usercfgs.gist_cache_key)||[],descs_html:[],author:"local",repo:"",icons:[]}].concat(f()(((o==null?void 0:o.boxdata.sysapps)||[]).filter(function(n){return n.keys&&!!n.keys.length})));Object.values((o==null?void 0:o.boxdata.appSubCaches)||{}).forEach(function(n){u=[].concat(f()(u),f()(n.apps.filter(function(r){return r.keys&&!!r.keys.length})))}),u=u.filter(function(n){return n.name.indexOf(t)>-1||!t?!0:!!n.keys.find(function(r){return r.indexOf(t)>-1})});var l=o==null?void 0:o.boxdata.datas;(0,h.useImperativeHandle)(K,function(){return{value:d}}),(0,h.useEffect)(function(){H(c.value)},[c.value]);var T=function(){B(!1),s("")},ue=function(r){var v;H(r),(v=c.onChange)===null||v===void 0||v.call(c,{target:{name:c.name,value:r}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,O()(O()({},c),{},{value:d,onChange:function(r){ue(r.target.value)},size:"small",type:"text",endAdornment:(0,a.jsx)(w.Z,{size:"small","aria-label":c.name,onClick:function(){B(!0)},children:(0,a.jsx)(j.Z,{fontSize:"small",sx:{color:function(r){return r.palette.primary.main}}})})})),(0,a.jsxs)(_e.Z,{open:$,onClose:function(){return T()},sx:{mt:15,mb:15,"& .MuiDialog-paper":{width:"100%"}},children:[(0,a.jsx)(q.Z,{position:"static",sx:{background:function(r){return r.palette.primary.main}},children:(0,a.jsx)(I.Z,{children:(0,a.jsxs)(p.ol,{children:[(0,a.jsx)(p.el,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0\u6216\u7F13\u5B58Key",inputProps:{"aria-label":"search"},onChange:function(r){s(r.target.value)}}),(0,a.jsx)(p.cB,{children:(0,a.jsx)(y.Z,{})})]})})}),(0,a.jsx)(U.Z,{subheader:(0,a.jsx)("li",{}),sx:{position:"relative",overflow:"auto",minHeight:300,"& ul":{padding:0}},children:(0,a.jsx)(k.Z,{name:"radio-buttons-group",onChange:function(r,v){ue(v)},children:u.length>0?u.map(function(n,r){var v,se,ie="".concat(n.id,"_").concat(n.author,"_").concat(r);return(0,a.jsxs)("li",{style:{width:"100%",boxSizing:"border-box"},children:[(0,a.jsxs)(F.Z,{sx:{borderBottom:"1px solid rgba(0, 0, 0, .125)",mt:0},children:[n==null?void 0:n.name,"\uFF08",n==null||(v=n.keys)===null||v===void 0?void 0:v.length,"\uFF09"]}),n==null||(se=n.keys)===null||se===void 0?void 0:se.map(function(P){return(0,a.jsx)(Z.ZP,{sx:{p:0,pl:3,pr:3},children:(0,a.jsx)(A.Z,{id:ie,primary:(0,a.jsx)(ne.Z,{value:P,control:(0,a.jsx)(te.Z,{}),label:P,sx:{"& .MuiFormControlLabel-label":{width:"80%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"noWrap"}}}),primaryTypographyProps:{noWrap:!0,variant:"caption",sx:{fontWeight:"bold"}},secondary:(0,a.jsx)(ee.Z,{noWrap:!0,color:"grey",variant:"caption",component:"div",children:(R()(l==null?void 0:l[P])==="object"&&(l!=null&&l[P])?JSON.stringify(l==null?void 0:l[P]):l==null?void 0:l[P])||"\u65E0\u6570\u636E"})})},"".concat(ie,"-").concat(P))})]},"section-".concat(ie))}):(0,a.jsx)(Z.ZP,{sx:{height:290,textAlign:"center"},children:(0,a.jsx)(A.Z,{primary:"\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C"})})})}),(0,a.jsxs)(ae.Z,{sx:{borderTop:"1px solid rgba(0, 0, 0, .125)"},children:[(0,a.jsx)(S.Z,{color:"inherit",onClick:function(){return T()},children:"\u53D6\u6D88"}),(0,a.jsx)(S.Z,{onClick:function(){return T()},autoFocus:!0,children:"\u786E\u5B9A"})]})]})]})});L.Z=oe},24020:function(de,L,e){e.r(L),e.d(L,{default:function(){return h}});var J=e(19632),R=e.n(J),G=e(97857),O=e.n(G),N=e(5574),f=e.n(N),Q=e(16961),m=e(58291),C=e(22148),X=e(41733),p=e(23508),E=e(51233),j=e(15861),y=e(87918),b=e(67720),w=e(2180),q=e(93946),I=e(90629),U=e(87357),Z=e(56815),A=e(83321),ee=e(50135),S=e(82280),_e=e(22797),ae=e(38895),ne=e(20640),F=e.n(ne),te=e(67294),k=e(87536),_=e(85893);function h(){var a=(0,k.cI)(),x=(0,C.useModel)("alert"),oe=(0,te.useState)("delKey"),g=f()(oe,2),K=g[0],V=g[1],c=(0,C.useModel)("app"),le=c.expanded,z=c.handleExpandedChange,$=(0,C.useModel)("api"),B=$.fetchDataKey,W=$.fetchSave,Y=(0,C.useModel)("@@initialState"),d=Y.initialState,H=Object.keys((d==null?void 0:d.boxdata.datas)||{}),D=(d==null?void 0:d.boxdata.usercfgs.gist_cache_key)||[],M=(d==null?void 0:d.boxdata.usercfgs.viewkeys)||[],re=[{data:D,key:m.Z.gistCacheKey,title:"\u975E\u8BA2\u9605\u6570\u636E\uFF08".concat(D.length,"\uFF09")},{key:m.Z.viewkeys,title:"\u8FD1\u671F\u67E5\u770B\uFF08".concat(M.length,"\uFF09"),data:M}];return(0,_.jsxs)(E.Z,{spacing:3,m:1,children:[re.map(function(s,t){return s.data.length?(0,_.jsx)(E.Z,{direction:"column",mt:2,children:(0,_.jsxs)(S.Z,{onChange:z(s.key),expanded:le.indexOf(s.key)!==-1,children:[(0,_.jsx)(ae.Z,{sx:{m:0},expandIcon:(0,_.jsx)(p.Z,{}),"aria-controls":"panel".concat(t,"-content"),id:"panel".concat(t,"-header"),children:(0,_.jsx)(j.Z,{variant:"body2",children:s.title})}),(0,_.jsx)(_e.Z,{children:(0,_.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:s.data.map(function(i,o){return(0,_.jsx)("div",{style:{padding:3},children:(0,_.jsx)(y.Z,{label:i,variant:"filled",sx:{maxWidth:160,"& span":{width:"100%"},boxShadow:function(l){return"0px 0 1px ".concat(l.palette.primary.main)}},onDelete:function(){var l=[{key:s.key,val:s.data.filter(function(T){return T!==i})}];K==="all"&&l.push({key:s.key,val:null}),W.run(l)},onClick:function(){a.setValue("key",i),B.run(i).then(function(l){a.setValue("data",l.val)})}})},"".concat(i,"_").concat(o))})})}),(0,_.jsx)(b.Z,{}),(0,_.jsx)(w.Z,{children:(0,_.jsxs)(E.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%",p:1},children:[(0,_.jsx)(y.Z,{label:"\u5220\u9664\u952E\u548C\u503C",size:"small",onClick:function(){return V("all")},color:K==="all"?"primary":void 0}),(0,_.jsx)(y.Z,{label:"\u4EC5\u5220\u9664\u952E",size:"small",onClick:function(){return V("delKey")},color:K==="delKey"?"primary":void 0}),(0,_.jsxs)(q.Z,{"aria-label":"delete",children:[(0,_.jsx)(X.Z,{}),"\u6E05\u7A7A"]})]})})]})},s.title):null}),(0,_.jsxs)(I.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(U.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(E.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(j.Z,{variant:"body2",children:"\u6570\u636E\u67E5\u770B\u5668"}),(0,_.jsx)(j.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=a.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});F()(t),x.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(k.Qr,{name:"key",control:a.control,render:function(t){var i=t.field;return(0,_.jsx)(Q.Z,O()(O()({fullWidth:!0,size:"small",placeholder:"\u6570\u636E\u952E (Key)"},i),{},{onChange:function(u){a.setValue("data",""),i.onChange(u)}}))}}),(0,_.jsx)(Z.Z,{children:"\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u6570\u636E\u952E, \u5982: boxjs_host"})]}),(0,_.jsx)(b.Z,{}),(0,_.jsx)(E.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(A.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=a.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});M.includes(t)||W.run({key:m.Z.viewkeys,val:[t].concat(R()(M))}),B.run(t).then(function(i){a.setValue("data",i.val)})},children:"\u67E5\u8BE2"})})]}),(0,_.jsxs)(I.Z,{elevation:3,sx:{pt:2},children:[(0,_.jsxs)(U.Z,{pr:2,pl:2,pb:1,children:[(0,_.jsxs)(E.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,_.jsx)(j.Z,{variant:"body2",children:"\u6570\u636E\u7F16\u8F91\u5668"}),(0,_.jsx)(j.Z,{variant:"body2",color:"primary",component:"div",onClick:function(){var t=a.getValues("key");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});F()(t),x.alert({open:!0,message:"\u590D\u5236\u6210\u529F",type:"success"})},children:"\u590D\u5236"})]}),(0,_.jsx)(ee.Z,O()({fullWidth:!0,multiline:!0,rows:8,size:"small",variant:"standard",placeholder:"\u6570\u636E\u5185\u5BB9",InputLabelProps:{shrink:!0}},a.register("data")))]}),(0,_.jsx)(b.Z,{}),(0,_.jsx)(E.Z,{spacing:2,justifyContent:"flex-end",pt:1,pb:1,children:(0,_.jsx)(A.Z,{size:"small",variant:"text",sx:{width:"max-content",marginLeft:"auto"},onClick:function(){var t=a.getValues("key"),i=a.getValues("data");if(!t)return x.alert({open:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E KEY",type:"warning"});var o=[{key:t,val:i}];!H.includes(t)&&!D.includes(t)?o.push({key:m.Z.gistCacheKey,val:[t].concat(R()(D))}):D.includes(t)&&!i&&o.push({key:m.Z.gistCacheKey,val:D.filter(function(u){return u!==t})}),W.run(o)},children:"\u4FDD\u5B58"})})]})]})}}}]);
