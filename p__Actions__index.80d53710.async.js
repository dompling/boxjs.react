"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[986],{32646:function(S,p,t){t.d(p,{k:function(){return P}});var O=t(97857),b=t.n(O),j=t(90948),M=t(45843),v=t(85893),P=(0,j.ZP)(function(d){return(0,v.jsx)(M.Z,b()({focusVisibleClassName:".Mui-focusVisible",disableRipple:!0},d))})(function(d){var i=d.theme;return{width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:i.palette.primary,opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:i.palette.primary,border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:i.palette.mode==="light"?i.palette.grey[100]:i.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:i.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:i.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:i.transitions.create(["background-color"],{duration:500})}}})},15991:function(S,p,t){t.r(p),t.d(p,{default:function(){return V}});var O=t(9783),b=t.n(O),j=t(32646),M=t(22148),v=t(23508),P=t(19602),d=t(51233),i=t(82280),T=t(38895),_=t(15861),U=t(22797),B=t(90629),W=t(87357),$=t(81458),w=t(45210),k=t(67294),e=t(85893);function V(){var D,C,R,g,E=(0,M.useModel)("api"),K=E.fetchScripts,z=E.fetchUpdateModules,r=E.fetchModules,L=E.fetchRunScript,s={},m={};(0,w.Z)(function(){s={},m={}}),(0,k.useEffect)(function(){K.run(),r.run()},[]);var u={};return(D=K.data)===null||D===void 0||(C=D.scripts)===null||C===void 0||C.forEach(function(n){u[n.type]||(u[n.type]=[]),u[n.type].push(n)}),(0,e.jsxs)(d.Z,{spacing:3,m:1,children:[r.data&&(0,e.jsxs)(i.Z,{sx:{borderRadius:2,overflow:"hidden"},children:[(0,e.jsx)(T.Z,{id:"modules",expandIcon:(0,e.jsx)(v.Z,{}),"aria-controls":"Modules-content",children:(0,e.jsx)(_.Z,{children:"Modules"})}),(0,e.jsx)(U.Z,{children:(R=r.data)===null||R===void 0||(g=R.available)===null||g===void 0?void 0:g.map(function(n,I){var o,h,l,c;return(0,e.jsxs)(B.Z,{elevation:3,component:"div",sx:{mb:2,p:2,position:"relative"},children:[(0,e.jsx)(_.Z,{variant:"caption",sx:{position:"absolute",right:0,top:0,bottom:0,width:5,opacity:.5,borderRadius:2,background:function(Z){var f,y,x,A;return(f=r.data)!==null&&f!==void 0&&f.enabled&&((y=r.data)===null||y===void 0||(x=y.enabled)===null||x===void 0||(A=x.indexOf)===null||A===void 0?void 0:A.call(x,n))>-1?Z.palette.success.main:Z.palette.error.main}}}),(0,e.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,e.jsx)(d.Z,{spacing:1,children:(0,e.jsx)(_.Z,{variant:"body2",children:n})}),(0,e.jsx)(j.k,{defaultChecked:((o=r.data)===null||o===void 0?void 0:o.enabled)&&((h=r.data)===null||h===void 0||(l=h.enabled)===null||l===void 0||(c=l.indexOf)===null||c===void 0?void 0:c.call(l,n))>-1,onChange:function(Z,f){z.run(b()({},n,f)).then(function(){return r.run()})}})]})]},"".concat(n,"-").concat(I))})})]},"modules"),Object.keys(u).map(function(n){var I=u[n];return(0,e.jsxs)(i.Z,{sx:{borderRadius:2,overflow:"hidden"},children:[(0,e.jsx)(T.Z,{id:n,expandIcon:(0,e.jsx)(v.Z,{}),"aria-controls":"".concat(n,"-content"),children:(0,e.jsx)(_.Z,{children:n})}),(0,e.jsx)(U.Z,{children:I.map(function(o,h){var l;return(0,e.jsxs)(B.Z,{elevation:3,sx:{mb:2,p:2,position:"relative",overflow:"hidden"},component:"div",onClick:function(){if(o.type!=="cron"){o.path.indexOf("http")>-1&&window.open(o.path);return}var a="".concat(o.path);s[a]===void 0&&(s[a]=0),s[a]+=1,m[a]=setTimeout(function(){m[a]!==void 0&&clearTimeout(m[a]),s[a]===2?(s[a]=0,L.run({url:o.path,isRemote:o.path.indexOf("http")>-1})):s[a]===1&&o.path.indexOf("http")>-1&&window.open(o.path),s={}},200)},children:[(0,e.jsx)(_.Z,{variant:"caption",sx:{position:"absolute",right:0,top:0,bottom:0,width:5,opacity:.5,borderRadius:2,background:function(a){return o.enabled?a.palette.success.main:a.palette.error.main}}}),(0,e.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,e.jsxs)(d.Z,{spacing:1,children:[(0,e.jsx)(_.Z,{variant:"body2",children:o.name}),(0,e.jsxs)(_.Z,{variant:"caption",color:"text.secondary",children:[o.type," ",o.parameters.cronexp]})]}),o.type==="cron"&&(0,e.jsx)(W.Z,{component:"span",onClick:function(){M.history.push("/code",{url:o.path})},children:(0,e.jsx)(P.Z,{})})]}),((l=L.fetches[o.path])===null||l===void 0?void 0:l.loading)&&(0,e.jsx)($.Z,{sx:{position:"absolute",bottom:0,left:0,width:"100%"}})]},"".concat(o.type,"-").concat(o.name,"-").concat(h))})})]},n)})]})}}}]);
