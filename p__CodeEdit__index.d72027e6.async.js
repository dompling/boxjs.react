"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[23],{82527:function(R,a,e){e.r(a),e.d(a,{monaco:function(){return k}});var A=e(15009),p=e.n(A),I=e(99289),W=e.n(I),S=e(5574),b=e.n(S),K=e(34747),y=e(18115),s=e(22148),$=e(37125),Z=e(58953),F=e(54970),z=e(3018),J=e(87357),N=e(90629),m=e(51233),H=e(15861),Y=e(98456),G=e(22169),Q=e(30381),V=e.n(Q),k=e(91739),h=e(67294),w=e(2302),t=e(85893),X=["/** "," * \u6CE8\u610F: "," * \u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u4F7F\u7528\u5B8C\u6574\u7684 EnvJs \u73AF\u5883"," * "," * \u540C\u65F6: "," * \u4F60`\u5FC5\u987B`\u624B\u52A8\u8C03\u7528 $done()"," * "," * \u56E0\u4E3A: "," * BoxJs \u4E0D\u4E3A\u4E3B\u52A8\u6267\u884C\u7684\u811A\u672C\u8C03\u7528 $done()"," * \u800C\u628A $done \u7684\u65F6\u673A\u5B8C\u5168\u4EA4\u7531\u811A\u672C\u63A7\u5236"," * "," * \u6700\u540E: "," * \u8FD9\u6BB5\u811A\u672C\u662F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C\u7684!"," */ ",'const host = $.getdata("boxjs_host")','console.log("\u8F93\u51FA\u7684\u5185\u5BB9\u662F\u8FD4\u56DE\u7ED9\u6D4F\u89C8\u5668\u7684!")',"$.msg($.name, host)","$.done()","// $done() \u6216 $.done() \u90FD\u53EF\u4EE5"],q=["/** "," * \u6CE8\u610F: "," * \u4F60\u6B63\u5728\u4F7F\u7528 Surge HTTP-API \u73AF\u5883"," * "," * \u5728\u8FD9\u91CC\uFF1A\u4F60\u4E0D\u53EF\u4EE5\u4F7F\u7528 EnvJs"," * \u8BF7\u786E\u4FDD\uFF1A\u4F60\u7684\u811A\u672C\u80FD\u88AB Surge \u72EC\u7ACB\u8FD0\u884C"," * "," * \u6700\u540E: "," * \u8FD9\u6BB5\u811A\u672C\u662F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C\u7684!"," */ ",'const host = $persistentStore.read("boxjs_host")','const msgs = [""]',"",'msgs.push("\u8FD9\u662F\u65E5\u5FD7\u7684\u5185\u5BB9")','msgs.push("BoxJs host: " + host)',"",'console.log(msgs.join("\\n"))',"$done()"],ee=function(){var f,g,P,M,j,C=(0,h.useRef)(null),ne=(0,s.useModel)("alert"),oe=(0,s.useModel)("@@initialState"),o=oe.initialState,te=(0,s.useModel)("api"),T=te.fetchRunScript,_e=(0,s.useSearchParams)(),re=b()(_e,1),ae=re[0],l=ae.get("url"),se=(o==null||(f=o.boxdata)===null||f===void 0?void 0:f.syscfgs.env)==="Surge"&&o!==null&&o!==void 0&&o.boxdata.usercfgs.httpapi?q.join(`
`):X.join(`
`),le=(0,h.useState)(l?"":se),U=b()(le,2),u=U[0],v=U[1],B=(0,s.useRequest)(function(_){return(0,s.request)(_)},{manual:!0,formatResult:function(n){return n},onSuccess:function(n){v(n)}}),ie=(((g=document.getElementsByClassName(K.Z.footer_container))===null||g===void 0||(P=g[0])===null||P===void 0?void 0:P.getBoundingClientRect().height)||100)+30,ue=(((M=document.getElementsByClassName(y.Z.header_container))===null||M===void 0||(j=M[0])===null||j===void 0?void 0:j.getBoundingClientRect().height)||160)+60,D=ie+ue;return console.log(D),(0,h.useEffect)(function(){l&&B.run(l)},[]),(0,t.jsxs)(J.Z,{pt:2,children:[(0,t.jsxs)(N.Z,{children:[(0,t.jsxs)(m.Z,{sx:{p:1},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(m.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsx)(H.Z,{variant:"h6",children:"\u811A\u672C\u7F16\u8F91\u5668"}),(0,t.jsxs)(m.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,t.jsx)(F.Z,{color:"primary",sx:{fontSize:24},onClick:function(){var n;(n=C.current)===null||n===void 0||n.click()}}),(0,t.jsx)(Z.Z,{color:"primary",sx:{fontSize:24},onClick:function(){var n=new Blob([u],{type:"text/plain;charset=utf-8;"}),i=V()().format("YYYY_MM_DD_HH_mm_ss"),d=(l==null?void 0:l.split("/"))||[],O=d[d.length-1]||"\u672A\u77E5\u540D\u79F0",E="".concat(O.replace(".js",""),"_").concat(i,".js"),c=URL.createObjectURL(n),r=document.createElement("a");r.href=c,r.setAttribute("download",E),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(r.href)}})]})]}),(0,t.jsxs)(m.Z,{alignItems:"center",sx:{position:"relative"},onClick:function(){u&&T.run({script:u})},children:[(0,t.jsx)(z.Z,{color:"primary",sx:{fontSize:24}}),T.loading&&(0,t.jsx)(Y.Z,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]}),o!=null&&o.isMobile?(0,t.jsx)(G.ZP,{value:u,style:{fontSize:12},maxWidth:"100%",extensions:[(0,$.eJ)()],height:"calc(100vh - ".concat(D,"px)"),theme:(o==null?void 0:o.mode)==="dark"?"dark":"light",onChange:function(n){return v(n)}}):(0,t.jsx)(w.ZP,{width:"100%",value:B.loading?"//...Loading":u,height:"calc(100vh - ".concat(D-90,"px)"),theme:(o==null?void 0:o.mode)==="dark"?"vs-dark":"vs",onChange:function(n){v(n)},options:{fontSize:12,tabSize:2,contextmenu:!1,selectOnLineNumbers:!0,minimap:{enabled:!1}}})]}),(0,t.jsx)("input",{ref:C,type:"file",style:{display:"none"},onChange:function(){var n,i=(n=C.current)===null||n===void 0?void 0:n.files;if(!(i!=null&&i.length))return ne.alert({message:"\u8BF7\u9009\u62E9\u6587\u4EF6",type:"error"});var d=new FileReader;d.readAsText(i[0],"UTF-8"),d.onload=function(){var O=W()(p()().mark(function E(c){var r,L;return p()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:L=c==null||(r=c.target)===null||r===void 0?void 0:r.result;try{v(L)}catch(de){console.log(de)}case 2:case"end":return x.stop()}},E)}));return function(E){return O.apply(this,arguments)}}()}})]})};a.default=ee},34747:function(R,a){a.Z={footer_container:"footer_container___QFPpy",footer_container_tow:"footer_container_tow___BWiJC",footer_bar:"footer_bar___Lok0r"}},18115:function(R,a){a.Z={header_container:"header_container___SQGhg",app_bar:"app_bar___hIe1l"}}}]);
