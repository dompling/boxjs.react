"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[202],{92398:function(A,f,a){a.r(f),a.d(f,{default:function(){return q}});var R=a(19632),p=a.n(R),I=a(97857),l=a.n(I),O=a(58291),m=a(22148),y=a(75716),T=a(91811),L=a(24410),B=a(14957),Z=a(43329),c=a(90948),K=a(82280),S=a(38895),U=a(22797),W=a(59334),F=a(97212),$=a(90629),w=a(51233),h=a(69661),z=a(15861),J=a(78462),D=a(93946),N=a(98619),G=a(18987),C=a(97458),H=a(67294),r=a(85893),Y=(0,c.ZP)(function(e){return(0,r.jsx)(K.Z,l()({disableGutters:!0,elevation:0,square:!0},e))})(function(){return{}}),Q=(0,c.ZP)(function(e){return(0,r.jsx)(S.Z,l()({expandIcon:(0,r.jsx)(y.Z,{sx:{fontSize:"0.9rem"}})},e))})(function(e){var u=e.theme;return{padding:0,paddingRight:10,backgroundColor:u.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, 0)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:u.spacing(1)}}}),V=(0,c.ZP)(U.Z)(function(e){var u=e.theme;return{padding:u.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}),X=(0,c.ZP)(W.Z)(function(){return{"& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),k=(0,c.ZP)(F.ZP)(function(){return{paddingLeft:8}});function q(){var e,u=(0,m.useModel)("app"),b=u.expanded,nn=u.setExpanded,an=(0,m.useModel)("@@initialState"),n=an.initialState,on=(n==null?void 0:n.apps)||[],rn=(0,m.useModel)("api"),j=rn.fetchSave,x=[],sn=(n==null?void 0:n.boxdata.sysapps)||[],E=[];n==null||n.boxdata.usercfgs.appsubs.forEach(function(i){if(n!=null&&n.boxdata.appSubCaches[i.url]){var o=n==null?void 0:n.boxdata.appSubCaches[i.url];E.push(o)}}),n==null||n.boxdata.usercfgs.favapps.forEach(function(i){var o=on.find(function(s){return s.id===i});o&&x.push(o)}),E=[].concat(p()(x.length?[{id:"favApp.id",name:"\u6536\u85CF\u5E94\u7528",description:"\u6536\u85CF\u5E94\u7528",author:"",icon:(0,r.jsx)(T.Z,{sx:{color:function(o){return o.palette.common.white}}}),repo:"",apps:x,task:[],updateTime:""}]:[]),p()(E),[{id:"sysApp.id",name:"\u7CFB\u7EDF\u5E94\u7528",description:"\u7CFB\u7EDF\u5E94\u7528",author:"",icon:(0,r.jsx)(L.Z,{sx:{color:function(o){return o.palette.common.white}}}),repo:"",apps:sn,task:[],updateTime:""}]);var g=n==null||(e=n.ui)===null||e===void 0?void 0:e.call(n,n==null?void 0:n.boxdata),en=function(o){return function(s,M){nn(function(d){return M?[].concat(p()(d),[o]):d.filter(function(t){return t!=o})})}};return(0,r.jsx)(C.Z,{style:{marginTop:16},appear:!!(n!=null&&n.boxdata.usercfgs.isAnimate),children:E.map(function(i){return(0,r.jsx)($.Z,{elevation:3,sx:{mb:2,overflow:"hidden",borderRadius:function(s){return s.spacing(2)}},children:(0,r.jsxs)(Y,{expanded:b.indexOf(i.id)!==-1,onChange:en(i.id),sx:{borderRadius:function(s){return s.spacing(2)},overflow:"hidden"},children:[(0,r.jsx)(Q,{"aria-controls":i.id,id:i.id,children:(0,r.jsxs)(w.Z,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:[typeof i.icon=="string"?(0,r.jsx)(h.Z,{id:i.id,src:i.icon,sx:{boxShadow:function(s){return s.shadows[1]}}}):(0,r.jsx)(h.Z,{id:i.id,sx:{boxShadow:function(s){return s.shadows[1]},bgcolor:function(s){return s.palette.primary.main}},children:i.icon}),(0,r.jsxs)(z.Z,{children:[i.name,"\uFF08",i.apps.length,"\uFF09"]})]})}),(0,r.jsx)(V,{sx:{padding:0,maxHeight:300,overflowY:"auto"},children:(0,r.jsx)(C.Z,{type:["top","bottom"],leaveReverse:!0,children:(0,r.jsx)(J.Z,{sx:{padding:0,bgcolor:"background.paper"},children:i.apps.map(function(o,s){var M=x.find(function(d){return d.id===o.id});return g==null||g.loadAppBaseInfo(o),b.indexOf(i.id)===-1?null:(0,r.jsx)(H.Fragment,{children:(0,r.jsx)(k,{secondaryAction:M?(0,r.jsx)(D.Z,{edge:"end","aria-label":"cancelFav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var t,P=n==null?void 0:n.boxdata.usercfgs.favapps.find(function(v){return v===o.id});if(P){var _=n==null?void 0:n.boxdata.usercfgs;j.run({key:O.Z.userCfgs,val:JSON.stringify(l()(l()({},_),{},{favapps:_==null||(t=_.favapps)===null||t===void 0?void 0:t.filter(function(v){return v!==o.id})}))})}},children:(0,r.jsx)(B.Z,{color:"primary"})}):(0,r.jsx)(D.Z,{edge:"end","aria-label":"fav",sx:{padding:0,paddingRight:"2px"},onClick:function(){var t,P=n==null?void 0:n.boxdata.usercfgs.favapps.find(function(v){return v===o.id});if(!P){var _=n==null?void 0:n.boxdata.usercfgs;_==null||(t=_.favapps)===null||t===void 0||t.push(o.id),j.run({key:O.Z.userCfgs,val:JSON.stringify(l()({},_))})}},children:(0,r.jsx)(Z.Z,{})}),children:(0,r.jsxs)(N.Z,{sx:{padding:0,pr:"0 !important"},onClick:function(){m.history.push("/app/".concat(o.id))},children:[(0,r.jsx)(G.Z,{children:(0,r.jsx)(h.Z,{alt:o.name[0],src:o.icon,sx:{boxShadow:function(t){return t.shadows[1]}}})}),(0,r.jsx)(X,{primary:o.name,secondary:o.repo})]})},"".concat(o.id,"-").concat(s))},"".concat(o.id,"-").concat(s))})},"app_list")})})]})},i.id)})})}},58291:function(A,f){f.Z={logo:"https://raw.githubusercontent.com/Orz-3/mini/master/Color/box.png",userCfgs:"chavy_boxjs_userCfgs",sessions:"chavy_boxjs_sessions",app_subCaches:"chavy_boxjs_app_subCaches",backups:"chavy_boxjs_backups",cursessions:"chavy_boxjs_cur_sessions",gistCacheKey:"@chavy_boxjs_userCfgs.gist_cache_key",viewkeys:"@chavy_boxjs_userCfgs.viewkeys"}}}]);
